/* Copyright (c) 2009-2010, Code Aurora Forum. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
 * 02110-1301, USA.
 */

#include <linux/delay.h>
#include <linux/pwm.h>
#ifdef CONFIG_SPI_QUP
#include <linux/spi/spi.h>
#else
#include <mach/gpio.h>
#endif
#include "msm_fb.h"

#include <linux/regulator/consumer.h>
#include <linux/gpio.h>
#include <linux/pwm.h>
#include <linux/pmic8058-pwm.h>
#include <linux/mfd/pmic8058.h>



//#define DEBUG 0
#define   TEST_STATIC_ELECTRICITY
#define 	SYSFS_DEBUG_CMD		
#define 	SAMSUNG_OLED_POWERDOWN
#define 	DYNAMIC_ELVSS
#define 	ACL_SAVE
//#define	 	HTF 1

#ifdef TEST_STATIC_ELECTRICITY
static void setup_test_reg_timer(void);

static void remove_test_reg_timer(void);
static int have_timer_flag = 0;
#endif

#ifdef CONFIG_SPI_QUP
#define LCDC_SAMSUNG_SPI_DEVICE_NAME	"lcdc_samsung_ams367pe02"
static struct spi_device *lcdc_spi_client;
#else
static int spi_cs;
static int spi_sclk;
static int spi_mosi;
#endif
//yanghai add
static int quick_poff_flag = 0;
//yanghai add end
#if 0            
struct samsung_state_type {
	boolean disp_initialized;
	boolean display_on;
	boolean disp_powered_up;
	int brightness;
};

#endif

struct samsung_spi_data {
	u8 addr;
	u8 len;
	u32 data[30];		// changed by huangtongfeng for new OLED display,The original is 22
};

#ifdef CONFIG_OPPO_MODIFY
/*added by huangtongfeng for new OLED display start*/

static struct samsung_spi_data level2_cmd_enable[] = {
	{.addr = 0xf0, .len = 2, .data = {0x5a, 0x5a}}
};

/*Panel Condition Set start*/
static struct samsung_spi_data display_control_set[] = {
	{.addr = 0xf2, .len = 5, .data = {0x02, 0x03, 0x1C, 0x10, 0x10}}
};
/*
static struct samsung_spi_data display_control_set[] = {
	{.addr = 0xf2, .len = 5, .data = {0x02, 0x06, 0x0a, 0x10, 0x0a}}
};
*/

static struct samsung_spi_data gtcon_control_set[] = {
	{.addr = 0xf7, .len = 3, .data = {0x09,0x00,0x30}}
};
   
static struct samsung_spi_data ltps_timing_set[] = {
	{.addr = 0xf8, .len = 23, .data = {0x05, 0x5e, 0x96, 0x6b, 0x7d, 0x0d,
		0x3f, 0x00, 0x00, 0x32, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07,
		0x05, 0x1f, 0x1f, 0x1f, 0x00, 0x00}}
};

/*Panel Condition Set end*/


#ifdef DYNAMIC_ELVSS

static struct samsung_spi_data dynamic_elvss_on[] = {
	{.addr = 0xb1, .len = 3, .data = {0x0f, 0x00, 0x16}}
};

static struct samsung_spi_data dynamic_elvss_defualt[] = {	
	{.addr = 0xb2, .len = 4, .data = {0x15, 0x15, 0x15, 0x15}}
};

static struct samsung_spi_data dynamic_elvss_37v[] = {	
	{.addr = 0xb2, .len = 4, .data = {0x1c, 0x1c, 0x1c, 0x1c}}
};
static struct samsung_spi_data dynamic_elvss_34v[] = {	
	{.addr = 0xb2, .len = 4, .data = {0x1f, 0x1f, 0x1f, 0x1f}}
};
static struct samsung_spi_data dynamic_elvss_30v[] = {	
	{.addr = 0xb2, .len = 4, .data = {0x23, 0x23, 0x23, 0x23}}
};

#if 0
static struct samsung_spi_data dynamic_elvss_defualt[] = {	
	{.addr = 0xb2, .len = 4, .data = {0x0b, 0x0b, 0x0b, 0x0b}}
};

static struct samsung_spi_data dynamic_elvss_37v[] = {	
	{.addr = 0xb2, .len = 4, .data = {0x12, 0x12, 0x12, 0x12}}
};
static struct samsung_spi_data dynamic_elvss_34v[] = {	
	{.addr = 0xb2, .len = 4, .data = {0x15, 0x15, 0x15, 0x15}}
};
static struct samsung_spi_data dynamic_elvss_30v[] = {	
	{.addr = 0xb2, .len = 4, .data = {0x19, 0x19, 0x19, 0x19}}
};

#endif

#if 0	          
static struct samsung_spi_data dynamic_elvss_off[] = {
	{.addr = 0xb1, .len = 3, .data = {0x0e, 0x00, 0x16}}
};
#endif

#endif



static struct samsung_spi_data display_condition_set[] = {
	{.addr = 0xf4, .len = 6, .data = {0x0a, 0xa7, 0x25, 0x6a, 0x44, 0x02}}
};

static struct samsung_spi_data gamma_set_updata[] = {
	{.addr = 0xfb, .len = 2, .data = {0x02, 0x5a}}
};

#ifdef ACL_SAVE
static struct samsung_spi_data acl_param_set[] = {
	{.addr = 0xc1, .len = 27, .data = {0x4d, 0x96, 0x1d, 0x00, 0x00, 0x01,
		0xdf, 0x00, 0x00, 0x03, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 
		0x08, 0x0f, 0x16, 0x1d, 0x24, 0x2a, 0x31, 0x38, 0x3f, 0x46}}
};
static struct samsung_spi_data acl_on_cmd[] = {
	{.addr = 0xc0, .len = 1, .data = {0x01}}         
};
static struct samsung_spi_data acl_off_cmd[] = {
	{.addr = 0xc0, .len = 1, .data = {0x00}}
};
#endif


/*
static struct samsung_spi_data gamma_set_cmd[] = {
{.addr = 0xf9, .len = 21, .data = {0x2E, 0xB0, 0xB4, 0xAC, 0xBE, 0x00, 0x91, 0x36, 0xA3, 0xAA, 0xAA, 0xBB, 0x00, 0xA6, 0x2E, 0xAB, 0xAD, 0xA7, 0xBC, 0x00, 0xB7}},
};
{.addr = 0xf9, .len = 21, .data = {0x2E, 0x81, 0xB7, 0xBA, 0xCD, 0x00, 0x41, 0x36, 0x80, 0xA7, 0xB1, 0xCB, 0x00, 0x4C, 0x2E, 0xAB, 0xB1, 0xB2, 0xCC, 0x00, 0x56}},	
{.addr = 0xf9, .len = 21, .data = {0x2E, 0x81, 0xB7, 0xBA, 0xCD, 0x00, 0x41, 0x36, 0x80, 0xA7, 0xB1, 0xCB, 0x00, 0x4C, 0x2E, 0xAB, 0xB1, 0xB2, 0xCC, 0x00, 0x56}},	


0x2E, 0xAE, 0xB6, 0xAD, 0xC1, 0x00, 0x82,

bl_level == 15 --->{.addr = 0xf9, .len = 21, .data = {0x2E, 0xAD, 0xB5, 0xAD, 0xC3, 0x00, 0x7F, 0x36, 0x9F, 0xAC, 0xA6, 0xBE, 0x00, 0x95, 0x2E, 0xAB, 0xAE, 0xA9, 0xBF, 0x00, 0xA5}},

*/
#if 0  
		// OPPO_second	: gamma 30~~290  base the highest light given at noon,nine,may by Fukun Zhu.....gamma 30~~190 is offered at afternoon,15th,may
		//OPPO_second gamma 5.11
	
		static struct samsung_spi_data gamma_backlight[] = {
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0x80,	0xB7,	0xB8,	0xCB,	0x0,	0x43,	0x36,	0x80,	0xA7,	0xB0,	0xCB,	0x0,	0x49,	0x2E,	0xA8,	0xB0,	0xB1,	0xCA,	0x0,	0x5C}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0x80,	0xB7,	0xB8,	0xCB,	0x0,	0x43,	0x36,	0x80,	0xA7,	0xB0,	0xCB,	0x0,	0x49,	0x2E,	0xA8,	0xB0,	0xB1,	0xCA,	0x0,	0x5C}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0x80,	0xB7,	0xB8,	0xCB,	0x0,	0x43,	0x36,	0x80,	0xA7,	0xB0,	0xCB,	0x0,	0x49,	0x2E,	0xA8,	0xB0,	0xB1,	0xCA,	0x0,	0x5C}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0x80,	0xB7,	0xB8,	0xCB,	0x0,	0x43,	0x36,	0x80,	0xA7,	0xB0,	0xCB,	0x0,	0x49,	0x2E,	0xA8,	0xB0,	0xB1,	0xCA,	0x0,	0x5C}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0x80,	0xB7,	0xB8,	0xCB,	0x0,	0x43,	0x36,	0x80,	0xA7,	0xB0,	0xCB,	0x0,	0x49,	0x2E,	0xA8,	0xB0,	0xB1,	0xCA,	0x0,	0x5C}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0x80,	0xB7,	0xB8,	0xCB,	0x0,	0x43,	0x36,	0x80,	0xA7,	0xB0,	0xCB,	0x0,	0x49,	0x2E,	0xA8,	0xB0,	0xB1,	0xCA,	0x0,	0x5C}},
	
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0x80,	0xB7,	0xB8,	0xCB,	0x0,	0x43,	0x36,	0x80,	0xA7,	0xB0,	0xCB,	0x0,	0x49,	0x2E,	0xA8,	0xB0,	0xB1,	0xCA,	0x0,	0x5C}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0x95,	0xB9,	0xB6,	0xC9,	0x0,	0x4C,	0x36,	0x85,	0xAD,	0xAE,	0xC9,	0x0,	0x52,	0x2E,	0xA9,	0xB0,	0xB1,	0xC9,	0x0,	0x66}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0x9D,	0xBA,	0xB3,	0xC7,	0x0,	0x53,	0x36,	0x88,	0xAF,	0xAD,	0xC8,	0x0,	0x5A,	0x2E,	0xA9,	0xB1,	0xB0,	0xC7,	0x0,	0x6F}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0x9E,	0xBA,	0xB1,	0xC7,	0x0,	0x59,	0x36,	0x89,	0xB1,	0xAD,	0xC8,	0x0,	0x60,	0x2E,	0xAA,	0xB1,	0xAE,	0xC6,	0x0,	0x76}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xA3,	0xB8,	0xB0,	0xC7,	0x0,	0x5F,	0x36,	0x8C,	0xB1,	0xAC,	0xC7,	0x0,	0x66,	0x2E,	0xAA,	0xB1,	0xAC,	0xC6,	0x0,	0x7D}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xA5,	0xB9,	0xAF,	0xC7,	0x0,	0x64,	0x36,	0x8E,	0xB1,	0xAA,	0xC6,	0x0,	0x6C,	0x2E,	0xAC,	0xAF,	0xAC,	0xC6,	0x0,	0x83}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xA6,	0xB8,	0xAF,	0xC6,	0x0,	0x69,	0x36,	0x92,	0xB0,	0xAA,	0xC4,	0x0,	0x71,	0x2E,	0xAA,	0xB0,	0xAB,	0xC4,	0x0,	0x8A}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xA7,	0xB7,	0xAF,	0xC4,	0x0,	0x6E,	0x36,	0x93,	0xAF,	0xAA,	0xC3,	0x0,	0x76,	0x2E,	0xAA,	0xB0,	0xAA,	0xC3,	0x0,	0x8F}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xAB,	0xB6,	0xAE,	0xC4,	0x0,	0x72,	0x36,	0x96,	0xAF,	0xA9,	0xC3,	0x0,	0x79,	0x2E,	0xAA,	0xAF,	0xAA,	0xC2,	0x0,	0x94}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xAC,	0xB6,	0xAD,	0xC2,	0x0,	0x76,	0x36,	0x97,	0xAE,	0xA9,	0xC2,	0x0,	0x7E,	0x2E,	0xAA,	0xAF,	0xAA,	0xC1,	0x0,	0x98}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xAE,	0xB4,	0xAC,	0xC2,	0x0,	0x7A,	0x36,	0x9A,	0xAD,	0xA9,	0xC1,	0x0,	0x82,	0x2E,	0xAB,	0xAE,	0xA9,	0xC1,	0x0,	0x9D}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xAE,	0xB2,	0xAC,	0xC3,	0x0,	0x7E,	0x36,	0x9B,	0xAD,	0xA9,	0xC1,	0x0,	0x85,	0x2E,	0xAB,	0xAD,	0xA8,	0xC2,	0x0,	0xA1}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xAD,	0xB3,	0xAC,	0xC1,	0x0,	0x82,	0x36,	0x9B,	0xAD,	0xA8,	0xBF,	0x0,	0x8A,	0x2E,	0xAA,	0xAD,	0xA8,	0xC1,	0x0,	0xA5}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xAD,	0xB3,	0xAA,	0xC1,	0x0,	0x85,	0x36,	0x9D,	0xAC,	0xA7,	0xBF,	0x0,	0x8D,	0x2E,	0xAB,	0xAD,	0xA8,	0xC0,	0x0,	0xA9}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xAE,	0xB4,	0xAA,	0xBF,	0x0,	0x88,	0x36,	0x9F,	0xAB,	0xA6,	0xBE,	0x0,	0x90,	0x2E,	0xA9,	0xAD,	0xA8,	0xBF,	0x0,	0xAD}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xAF,	0xB3,	0xAA,	0xBE,	0x0,	0x8C,	0x36,	0xA0,	0xAB,	0xA6,	0xBD,	0x0,	0x94,	0x2E,	0xAA,	0xAD,	0xA8,	0xBE,	0x0,	0xB1}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB0,	0xB3,	0xA9,	0xBE,	0x0,	0x8F,	0x36,	0xA1,	0xAA,	0xA6,	0xBE,	0x0,	0x97,	0x2E,	0xAA,	0xAC,	0xA7,	0xBD,	0x0,	0xB5}},
	
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB1,	0xB2,	0xA8,	0xBD,	0x0,	0x92,	0x36,	0xA2,	0xAA,	0xA5,	0xBD,	0x0,	0x9B,	0x2E,	0xAB,	0xAC,	0xA6,	0xBD,	0x0,	0xB9}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB1,	0xB0,	0xAA,	0xBC,	0x0,	0x95,	0x36,	0xA3,	0xA8,	0xA6,	0xBC,	0x0,	0x9E,	0x2E,	0xAB,	0xAB,	0xA7,	0xBD,	0x0,	0xBC}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB0,	0xB1,	0xA9,	0xBB,	0x0,	0x99,	0x36,	0xA3,	0xA9,	0xA4,	0xBC,	0x0,	0xA1,	0x2E,	0xAA,	0xAB,	0xA6,	0xBD,	0x0,	0xBF}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB0,	0xB1,	0xA7,	0xBB,	0x0,	0x9C,	0x36,	0xA4,	0xA9,	0xA3,	0xBC,	0x0,	0xA4,	0x2E,	0xAA,	0xAA,	0xA5,	0xBC,	0x0,	0xC3}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB1,	0xB1,	0xA7,	0xBB,	0x0,	0x9E,	0x36,	0xA4,	0xA8,	0xA4,	0xba,	0x0,	0xA6,	0x2E,	0xAA,	0xAA,	0xA5,	0xBC,	0x0,	0xC6}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB2,	0xB0,	0xA6,	0xB9,	0x0,	0xA2,	0x36,	0xA5,	0xA8,	0xA4,	0xBA,	0x0,	0xA9,	0x2E,	0xAA,	0xAA,	0xA5,	0xBA,	0x0,	0xCA}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB1,	0xB0,	0xA5,	0xBA,	0x0,	0xA5,	0x36,	0xA5,	0xA8,	0xA2,	0xBA,	0x0,	0xAC,	0x2E,	0xA9,	0xAB,	0xA3,	0xBB,	0x0,	0xCD}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB1,	0xAE,	0xA6,	0xBA,	0x0,	0xA7,	0x36,	0xA6,	0xA7,	0xA3,	0xB9,	0x0,	0xAF,	0x2E,	0xA9,	0xAA,	0xA3,	0xBB,	0x0,	0xD0}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB2,	0xAF,	0xA6,	0xB8,	0x0,	0xA9,	0x36,	0xA6,	0xA7,	0xA2,	0xB8,	0x0,	0xB2,	0x2E,	0xA9,	0xAB,	0xA3,	0xBA,	0x0,	0xD2}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB1,	0xAD,	0xA5,	0xB7,	0x0,	0xAA,	0x36,	0xA6,	0xA6,	0xA0,	0xB8,	0x0,	0xB3,	0x2E,	0xA8,	0xA9,	0xA1,	0xB9,	0x0,	0xD4}},
			{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB1,	0xAB,	0xA7,	0xB6,	0x0,	0xAD,	0x36,	0xA6,	0xA6,	0x9F,	0xBA,	0x0,	0xB5,	0x2E,	0xA8,	0xA7,	0xA3,	0xBB,	0x0,	0xD7}}
	
			
		};
#endif

#if 1
//SAMSUNG_second
	static struct samsung_spi_data gamma_backlight[] = {  
#if 0		
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x81,	0xB7 ,	0xBA ,	0xCD ,	0x0,	0x41,	0x36,	0x80,	0xA7 ,	0xB1 ,	0xCB ,	0x0,	0x4C ,	0x2E ,	0xAB ,	0xB1 ,	0xB2 ,	0xCC ,	0x0,	0x56}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x81,	0xB7 ,	0xBA ,	0xCD ,	0x0,	0x41,	0x36,	0x80,	0xA7 ,	0xB1 ,	0xCB ,	0x0,	0x4C ,	0x2E ,	0xAB ,	0xB1 ,	0xB2 ,	0xCC ,	0x0,	0x56}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x81,	0xB7 ,	0xBA ,	0xCD ,	0x0,	0x41,	0x36,	0x80,	0xA7 ,	0xB1 ,	0xCB ,	0x0,	0x4C ,	0x2E ,	0xAB ,	0xB1 ,	0xB2 ,	0xCC ,	0x0,	0x56}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x81,	0xB7 ,	0xBA ,	0xCD ,	0x0,	0x41,	0x36,	0x80,	0xA7 ,	0xB1 ,	0xCB ,	0x0,	0x4C ,	0x2E ,	0xAB ,	0xB1 ,	0xB2 ,	0xCC ,	0x0,	0x56}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x81,	0xB7 ,	0xBA ,	0xCD ,	0x0,	0x41,	0x36,	0x80,	0xA7 ,	0xB1 ,	0xCB ,	0x0,	0x4C ,	0x2E ,	0xAB ,	0xB1 ,	0xB2 ,	0xCC ,	0x0,	0x56}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x81,	0xB7 ,	0xBA ,	0xCD ,	0x0,	0x41,	0x36,	0x80,	0xA7 ,	0xB1 ,	0xCB ,	0x0,	0x4C ,	0x2E ,	0xAB ,	0xB1 ,	0xB2 ,	0xCC ,	0x0,	0x56}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x81,	0xB7 ,	0xBA ,	0xCD ,	0x0,	0x41,	0x36,	0x80,	0xA7 ,	0xB1 ,	0xCB ,	0x0,	0x4C ,	0x2E ,	0xAB ,	0xB1 ,	0xB2 ,	0xCC ,	0x0,	0x56}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x96,	0xB9 ,	0xB8 ,	0xCB ,	0x0,	0x49,	0x36,	0x85,	0xAD ,	0xAF ,	0xC9 ,	0x0,	0x55,	0x2E ,	0xAC ,	0xB1 ,	0xB3 ,	0xCA ,	0x0,	0x60}},
#else
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x9E ,	0xBA ,	0xB6 ,	0xC9 ,	0x0,	0x50,	0x36,	0x88,	0xAF ,	0xAE ,	0xC8 ,	0x0,	0x5D-4 ,	0x2E ,	0xAC ,	0xB2 ,	0xB2 ,	0xC8 ,	0x0,	0x68}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x9E ,	0xBA ,	0xB6 ,	0xC9 ,	0x0,	0x50,	0x36,	0x88,	0xAF ,	0xAE ,	0xC8 ,	0x0,	0x5D-4 ,	0x2E ,	0xAC ,	0xB2 ,	0xB2 ,	0xC8 ,	0x0,	0x68}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x9E ,	0xBA ,	0xB6 ,	0xC9 ,	0x0,	0x50,	0x36,	0x88,	0xAF ,	0xAE ,	0xC8 ,	0x0,	0x5D-4 ,	0x2E ,	0xAC ,	0xB2 ,	0xB2 ,	0xC8 ,	0x0,	0x68}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x9E ,	0xBA ,	0xB6 ,	0xC9 ,	0x0,	0x50,	0x36,	0x88,	0xAF ,	0xAE ,	0xC8 ,	0x0,	0x5D-4 ,	0x2E ,	0xAC ,	0xB2 ,	0xB2 ,	0xC8 ,	0x0,	0x68}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x9E ,	0xBA ,	0xB6 ,	0xC9 ,	0x0,	0x50,	0x36,	0x88,	0xAF ,	0xAE ,	0xC8 ,	0x0,	0x5D-4 ,	0x2E ,	0xAC ,	0xB2 ,	0xB2 ,	0xC8 ,	0x0,	0x68}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x9E ,	0xBA ,	0xB6 ,	0xC9 ,	0x0,	0x50,	0x36,	0x88,	0xAF ,	0xAE ,	0xC8 ,	0x0,	0x5D-4 ,	0x2E ,	0xAC ,	0xB2 ,	0xB2 ,	0xC8 ,	0x0,	0x68}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x9E ,	0xBA ,	0xB6 ,	0xC9 ,	0x0,	0x50,	0x36,	0x88,	0xAF ,	0xAE ,	0xC8 ,	0x0,	0x5D-4 ,	0x2E ,	0xAC ,	0xB2 ,	0xB2 ,	0xC8 ,	0x0,	0x68}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x9E ,	0xBA ,	0xB6 ,	0xC9 ,	0x0,	0x50,	0x36,	0x88,	0xAF ,	0xAE ,	0xC8 ,	0x0,	0x5D-4 ,	0x2E ,	0xAC ,	0xB2 ,	0xB2 ,	0xC8 ,	0x0,	0x68}},
#endif
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x9E ,	0xBA ,	0xB6 ,	0xC9 ,	0x0,	0x50,	0x36,	0x88,	0xAF ,	0xAE ,	0xC8 ,	0x0,	0x5D-4 ,	0x2E ,	0xAC ,	0xB2 ,	0xB2 ,	0xC8 ,	0x0,	0x68}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0x9F ,	0xBA ,	0xB4 ,	0xC9 ,	0x0,	0x56,	0x36,	0x89,	0xB1 ,	0xAD ,	0xC8 ,	0x0,	0x63-3,	0x2E ,	0xAC ,	0xB2 ,	0xB0 ,	0xC7 ,	0x0,	0x6F }},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xA4 ,	0xB8 ,	0xB4 ,	0xC9 ,	0x0,	0x5B ,	0x36,	0x8C ,	0xB2 ,	0xAC ,	0xC7 ,	0x0,	0x69-3,	0x2E ,	0xAD ,	0xB1 ,	0xAF ,	0xC6 ,	0x0,	0x76}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xA6 ,	0xB9 ,	0xB2 ,	0xC9 ,	0x0,	0x60,	0x36,	0x8E ,	0xB2 ,	0xAA ,	0xC6 ,	0x0,	0x6F-3 ,	0x2E ,	0xAE ,	0xB0 ,	0xAE ,	0xC6 ,	0x0,	0x7C }},

		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xA7 ,	0xB8 ,	0xB2 ,	0xC8 ,	0x0,	0x65,	0x36,	0x92,	0xB1 ,	0xAA ,	0xC4 ,	0x0,	0x74-3,	0x2E ,	0xAC ,	0xB1 ,	0xAD ,	0xC5 ,	0x0,	0x82}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xA8 ,	0xB8 ,	0xB2 ,	0xC6 ,	0x0,	0x69,	0x36,	0x93,	0xB0 ,	0xAA ,	0xC3 ,	0x0,	0x79-3,	0x2E ,	0xAC ,	0xB1 ,	0xAC ,	0xC4 ,	0x0,	0x87}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xAB ,	0xB7 ,	0xB1 ,	0xC6 ,	0x0,	0x6D ,	0x36,	0x96,	0xB0 ,	0xA9 ,	0xC3 ,	0x0,	0x7D-3,	0x2E ,	0xAC ,	0xB0 ,	0xAC ,	0xC3 ,	0x0,	0x8C }},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xAC ,	0xB7 ,	0xB0 ,	0xC4 ,	0x0,	0x71,	0x36,	0x97,	0xAF ,	0xA9 ,	0xC2 ,	0x0,	0x82-3,	0x2E ,	0xAC ,	0xB0 ,	0xAC ,	0xC2 ,	0x0,	0x90}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xAE ,	0xB5 ,	0xAF ,	0xC4 ,	0x0,	0x75,	0x36,	0x9A ,	0xAE ,	0xA9 ,	0xC1 ,	0x0,	0x86-2,	0x2E ,	0xAD ,	0xAF ,	0xAB ,	0xC1 ,	0x0,	0x95}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xAE ,	0xB4 ,	0xAF ,	0xC5 ,	0x0,	0x78,	0x36,	0x9B ,	0xAE ,	0xA9 ,	0xC1 ,	0x0,	0x89-2,	0x2E ,	0xAD ,	0xAE ,	0xAA ,	0xC2 ,	0x0,	0x99}},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xAD ,	0xB5 ,	0xAF ,	0xC3 ,	0x0,	0x7C ,	0x36,	0x9B ,	0xAE ,	0xA8 ,	0xBF ,	0x0,	0x8E -2,	0x2E ,	0xAC ,	0xAE ,	0xAA ,	0xC1 ,	0x0,	0x9D}} ,
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xAD ,	0xB5 ,	0xAD ,	0xC3 ,	0x0,	0x7F ,	0x36,	0x9D ,	0xAD ,	0xA7 ,	0xBF ,	0x0,	0x91-2,	0x2E ,	0xAC ,	0xAE ,	0xA9 ,	0xC0 ,	0x0,	0xA1}} ,
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xAE ,	0xB6 ,	0xAD ,	0xC1 ,	0x0,	0x82,	0x36,	0x9F ,	0xAC ,	0xA6 ,	0xBE ,	0x0,	0x95-2,	0x2E ,	0xAB ,	0xAE ,	0xA9 ,	0xBF ,	0x0,	0xA5}} ,
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xAF ,	0xB5 ,	0xAD ,	0xC1 ,	0x0,	0x85,	0x36,	0xA0 ,	0xAC ,	0xA6 ,	0xBD ,	0x0,	0x99-2,	0x2E ,	0xAB ,	0xAE ,	0xA9 ,	0xBE ,	0x0,	0xA9}} ,
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB0 ,	0xB5 ,	0xAC ,	0xC1 ,	0x0,	0x88,	0x36,	0xA1 ,	0xAB ,	0xA6 ,	0xBD ,	0x0,	0x9C-2,	0x2E ,	0xAB ,	0xAE ,	0xA8 ,	0xBD ,	0x0,	0xAD }},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB1 ,	0xB5 ,	0xAB ,	0xC0 ,	0x0,	0x8B ,	0x36,	0xA2 ,	0xAB ,	0xA5 ,	0xBC ,	0x0,	0xA0-2,	0x2E ,	0xAC ,	0xAE ,	0xA7 ,	0xBC ,	0x0,	0xB1 }},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB1 ,	0xB3 ,	0xAD ,	0xBF ,	0x0,	0x8E ,	0x36,	0xA3 ,	0xA9 ,	0xA6 ,	0xBB ,	0x0,	0xA3-1,	0x2E ,	0xAC ,	0xAD ,	0xA8 ,	0xBC ,	0x0,	0xB4 }},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB0 ,	0xB4 ,	0xAC ,	0xBE ,	0x0,	0x91,	0x36,	0xA3 ,	0xAA ,	0xA4 ,	0xBB ,	0x0,	0xA6-1,	0x2E ,	0xAB ,	0xAD ,	0xA7 ,	0xBC ,	0x0,	0xB7 }},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB0 ,	0xB4 ,	0xAA ,	0xBE ,	0x0,	0x94,	0x36,	0xA4 ,	0xAA ,	0xA3 ,	0xBB ,	0x0,	0xA9-1,	0x2E ,	0xAB ,	0xAC ,	0xA6 ,	0xBB ,	0x0,	0xBB }},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB1 ,	0xB4 ,	0xAA ,	0xBE ,	0x0,	0x96,	0x36,	0xA4 ,	0xA9 ,	0xA4 ,	0xBA ,	0x0,	0xAC-1,	0x2E ,	0xAB ,	0xAC ,	0xA6 ,	0xBB ,	0x0,	0xBE }},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB2 ,	0xB3 ,	0xA9 ,	0xBC ,	0x0,	0x9A ,	0x36,	0xA5 ,	0xA9 ,	0xA4 ,	0xB9 ,	0x0,	0xAF-1,	0x2E ,	0xAB ,	0xAC ,	0xA6 ,	0xB9 ,	0x0,	0xC2}} ,
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB1 ,	0xB3 ,	0xA8 ,	0xBD ,	0x0,	0x9C ,	0x36,	0xA5 ,	0xA9 ,	0xA2 ,	0xB9 ,	0x0,	0xB2-1,	0x2E ,	0xAA ,	0xAD ,	0xA4 ,	0xBA ,	0x0,	0xC5}} ,
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB1 ,	0xB1 ,	0xA9 ,	0xBD ,	0x0,	0x9E ,	0x36,	0xA6 ,	0xA8 ,	0xA3 ,	0xB8 ,	0x0,	0xB5-1,	0x2E ,	0xAA ,	0xAC ,	0xA4 ,	0xBA ,	0x0,	0xC8}} ,
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB2 ,	0xB2 ,	0xA9 ,	0xBB ,	0x0,	0xA0 ,	0x36,	0xA6 ,	0xA8 ,	0xA2 ,	0xB7 ,	0x0,	0xB8 ,	0x2E ,	0xAA ,	0xAD ,	0xA4 ,	0xB9 ,	0x0,	0xCA}} ,
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB1 ,	0xB0 ,	0xA8 ,	0xBA ,	0x0,	0xA1 ,	0x36,	0xA6 ,	0xA7 ,	0xA0 ,	0xB7 ,	0x0,	0xB9 ,	0x2E ,	0xA9 ,	0xAC ,	0xA2 ,	0xB8 ,	0x0,	0xCC }},
		{.addr = 0xf9, .len = 21, .data = {0x2E ,	0xB0 ,	0xAE ,	0xA9 ,	0xB9 ,	0x0,	0xA3 ,	0x36,	0xA6 ,	0xA6 ,	0x9F ,	0xB8 ,	0x0,	0xBB ,	0x2E ,	0xA8 ,	0xA9 ,	0xA3 ,	0xB9 ,	0x0,	0xCE }}
		
};

#endif

#if 0
	// OPPO_second
	static struct samsung_spi_data gamma_backlight[] = {
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0x8e,	0xb7,	0xb8,	0xc1,	0x0,	0x41,	0x36,	0x81,	0xa7,	0xb0,	0xcb,	0x0,	0x46,	0x2e,	0xaa,	0xb0,	0xb1,	0xca,	0x0,	0x58}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0x8e,	0xb7,	0xb8,	0xc1,	0x0,	0x41,	0x36,	0x81,	0xa7,	0xb0,	0xcb,	0x0,	0x46,	0x2e,	0xaa,	0xb0,	0xb1,	0xca,	0x0,	0x58}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0x8e,	0xb7,	0xb8,	0xc1,	0x0,	0x41,	0x36,	0x81,	0xa7,	0xb0,	0xcb,	0x0,	0x46,	0x2e,	0xaa,	0xb0,	0xb1,	0xca,	0x0,	0x58}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0x8e,	0xb7,	0xb8,	0xc1,	0x0,	0x41,	0x36,	0x81,	0xa7,	0xb0,	0xcb,	0x0,	0x46,	0x2e,	0xaa,	0xb0,	0xb1,	0xca,	0x0,	0x58}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0x8e,	0xb7,	0xb8,	0xc1,	0x0,	0x41,	0x36,	0x81,	0xa7,	0xb0,	0xcb,	0x0,	0x46,	0x2e,	0xaa,	0xb0,	0xb1,	0xca,	0x0,	0x58}},
		
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0x8e,	0xb7,	0xb8,	0xc1,	0x0,	0x41,	0x36,	0x81,	0xa7,	0xb0,	0xcb,	0x0,	0x46,	0x2e,	0xaa,	0xb0,	0xb1,	0xca,	0x0,	0x58}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0x96,	0xb9,	0xb6,	0xc0,	0x0,	0x49,	0x36,	0x86,	0xad,	0xae,	0xc9,	0x0,	0x4f,	0x2e,	0xab,	0xb0,	0xb1,	0xc9,	0x0,	0x62}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0x9e,	0xba,	0xb3,	0xc0,	0x0,	0x50,	0x36,	0x89,	0xaf,	0xad,	0xc8,	0x0,	0x57,	0x2e,	0xab,	0xb1,	0xb0,	0xc7,	0x0,	0x6a}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0x9f,	0xba,	0xb1,	0xbe,	0x0,	0x56,	0x36,	0x8a,	0xb1,	0xad,	0xc8,	0x0,	0x5d,	0x2e,	0xab,	0xb1,	0xae,	0xc6,	0x0,	0x71}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xa4,	0xb8,	0xb1,	0xbf,	0x0,	0x5b,	0x36,	0x8d,	0xb1,	0xac,	0xc7,	0x0,	0x62,	0x2e,	0xac,	0xb0,	0xac,	0xc6,	0x0,	0x78}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xa6,	0xb9,	0xaf,	0xbf,	0x0,	0x61,	0x36,	0x8f,	0xb1,	0xaa,	0xc6,	0x0,	0x68,	0x2e,	0xad,	0xaf,	0xac,	0xc6,	0x0,	0x7e}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xa7,	0xb7,	0xaf,	0xbe,	0x0,	0x66,	0x36,	0x93,	0xb0,	0xaa,	0xc4,	0x0,	0x6d,	0x2e,	0xab,	0xb0,	0xab,	0xc4,	0x0,	0x85}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xa8,	0xb7,	0xaf,	0xbe,	0x0,	0x6a,	0x36,	0x94,	0xaf,	0xaa,	0xc3,	0x0,	0x72,	0x2e,	0xab,	0xb0,	0xaa,	0xc3,	0x0,	0x8a}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xab,	0xb6,	0xae,	0xbd,	0x0,	0x6e,	0x36,	0x96,	0xaf,	0xa9,	0xc3,	0x0,	0x76,	0x2e,	0xab,	0xaf,	0xaa,	0xc2,	0x0,	0x8f}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xac,	0xb6,	0xad,	0xbd,	0x0,	0x72,	0x36,	0x97,	0xae,	0xa9,	0xc2,	0x0,	0x7a,	0x2e,	0xab,	0xaf,	0xaa,	0xc1,	0x0,	0x93}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xaf,	0xb3,	0xac,	0xbb,	0x0,	0x76,	0x36,	0x9b,	0xad,	0xa9,	0xc1,	0x0,	0x7e,	0x2e,	0xac,	0xae,	0xa9,	0xc1,	0x0,	0x98}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xae,	0xb2,	0xac,	0xbb,	0x0,	0x7a,	0x36,	0x9b,	0xad,	0xa9,	0xc1,	0x0,	0x81,	0x2e,	0xac,	0xad,	0xa8,	0xc2,	0x0,	0x9c}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xae,	0xb3,	0xac,	0xba,	0x0,	0x7e,	0x36,	0x9b,	0xad,	0xa8,	0xbf,	0x0,	0x86,	0x2e,	0xab,	0xac,	0xa9,	0xc1,	0x0,	0xa0}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xad,	0xb3,	0xaa,	0xba,	0x0,	0x81,	0x36,	0x9d,	0xac,	0xa7,	0xbf,	0x0,	0x88,	0x2e,	0xab,	0xac,	0xa8,	0xc0,	0x0,	0xa3}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xaf,	0xb4,	0xaa,	0xb9,	0x0,	0x84,	0x36,	0x9f,	0xab,	0xa6,	0xbe,	0x0,	0x8c,	0x2e,	0xaa,	0xac,	0xa8,	0xbf,	0x0,	0xa7}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb0,	0xb3,	0xaa,	0xb9,	0x0,	0x87,	0x36,	0xa0,	0xab,	0xa6,	0xbd,	0x0,	0x90,	0x2e,	0xaa,	0xac,	0xa8,	0xbe,	0x0,	0xab}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb1,	0xb3,	0xa9,	0xb8,	0x0,	0x8b,	0x36,	0xa1,	0xaa,	0xa6,	0xbe,	0x0,	0x93,	0x2e,	0xaa,	0xac,	0xa7,	0xbd,	0x0,	0xaf}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb2,	0xb2,	0xa8,	0xb8,	0x0,	0x8e,	0x36,	0xa2,	0xaa,	0xa5,	0xbd,	0x0,	0x97,	0x2e,	0xab,	0xac,	0xa6,	0xbd,	0x0,	0xb3}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb2,	0xb0,	0xaa,	0xb8,	0x0,	0x91,	0x36,	0xa3,	0xa8,	0xa6,	0xbc,	0x0,	0x99,	0x2e,	0xab,	0xab,	0xa7,	0xbd,	0x0,	0xb6}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb1,	0xb1,	0xa9,	0xb7,	0x0,	0x94,	0x36,	0xa3,	0xa9,	0xa4,	0xbc,	0x0,	0x9c,	0x2e,	0xaa,	0xab,	0xa6,	0xbd,	0x0,	0xb9}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb1,	0xb1,	0xa7,	0xb7,	0x0,	0x97,	0x36,	0xa4,	0xa9,	0xa3,	0xbc,	0x0,	0x9f,	0x2e,	0xaa,	0xaa,	0xa5,	0xbc,	0x0,	0xbd}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb2,	0xb1,	0xa7,	0xb6,	0x0,	0x9a,	0x36,	0xa4,	0xa8,	0xa4,	0xbb,	0x0,	0xa2,	0x2e,	0xaa,	0xaa,	0xa5,	0xbc,	0x0,	0xc0}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb3,	0xb0,	0xa5,	0xb6,	0x0,	0x9e,	0x36,	0xa5,	0xa8,	0xa4,	0xba,	0x0,	0xa4,	0x2e,	0xaa,	0xaa,	0xa5,	0xba,	0x0,	0xc4}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb2,	0xb0,	0xa6,	0xb5,	0x0,	0xa0,	0x36,	0xa5,	0xa8,	0xa2,	0xba,	0x0,	0xa7,	0x2e,	0xa9,	0xab,	0xa3,	0xbb,	0x0,	0xc7}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb1,	0xae,	0xa6,	0xb5,	0x0,	0xa2,	0x36,	0xa6,	0xa7,	0xa3,	0xb9,	0x0,	0xaa,	0x2e,	0xa9,	0xaa,	0xa3,	0xbb,	0x0,	0xca}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb3,	0xaf,	0xa6,	0xb5,	0x0,	0xa4,	0x36,	0xa6,	0xa7,	0xa2,	0xb8,	0x0,	0xad,	0x2e,	0xa9,	0xab,	0xa3,	0xba,	0x0,	0xcc}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb2,	0xad,	0xa5,	0xb7,	0x0,	0xa5,	0x36,	0xa6,	0xa6,	0xa0,	0xb8,	0x0,	0xae,	0x2e,	0xa8,	0xaa,	0xa1,	0xb9,	0x0,	0xce}},
		{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb1,	0xab,	0xa7,	0xb6,	0x00,	0xad,	0x36,	0xa6,	0xa6,	0x9f,	0xba,	0x00,	0xb5,	0x2e,	0xa8,	0xa7,	0xa3,	0xbb,	0x00,	0xd7}}
	
	
	//	{.addr = 0xf9, .len = 21, .data = {0x2e,	0xb1,	0xab,	0xa7,	0xb6,	0x0,	0xa8,	0x36,	0xa6,	0xa6,	0xaf,	0xba,	0x0,	0xb0,	0x2e,	0xa8,	0xa7,	0xa3,	0xbb,	0x0,	0xd0}}
	//	{.addr = 0xf9, .len = 21, .data = {0x2E,	0xB1 ,	0xAB ,	0xA7 ,	0xB6 ,	0x0 ,	0xAD ,	0x36 ,	0xA6 ,	0xA6 ,	0x9F ,	0xBA ,	0x0 ,	0xB5 ,	0x2E ,	0xA8 ,	0xA7 ,	0xA3 ,	0xBB ,	0x0 ,	0xD7}} 
	
	
	};
#endif

#if 0
//Gamma = 2.2 
	static struct samsung_spi_data gamma_backlight[] = {
	{.addr = 0xf9, .len = 21, .data = {0x0C, 0x85, 0xB4, 0xB8, 0xD1, 0x00, 0x45, 0x0C, 0x6C, 0xA9, 0xC0, 0xD7, 0x00, 0x53, 0x0C, 0xBD, 0xAE, 0xC5, 0xD7, 0x00, 0x53}},	
	{.addr = 0xf9, .len = 21, .data = {0x0C, 0x85, 0xB4, 0xB8, 0xD1, 0x00, 0x45, 0x0C, 0x6C, 0xA9, 0xC0, 0xD7, 0x00, 0x53, 0x0C, 0xBD, 0xAE, 0xC5, 0xD7, 0x00, 0x53}},	
	{.addr = 0xf9, .len = 21, .data = {0x0C, 0x85, 0xB4, 0xB8, 0xD1, 0x00, 0x45, 0x0C, 0x6C, 0xA9, 0xC0, 0xD7, 0x00, 0x53, 0x0C, 0xBD, 0xAE, 0xC5, 0xD7, 0x00, 0x53}},	
	{.addr = 0xf9, .len = 21, .data = {0x0C, 0x85, 0xB4, 0xB8, 0xD1, 0x00, 0x45, 0x0C, 0x6C, 0xA9, 0xC0, 0xD7, 0x00, 0x53, 0x0C, 0xBD, 0xAE, 0xC5, 0xD7, 0x00, 0x53}},	
	{.addr = 0xf9, .len = 21, .data = {0x0C, 0x85, 0xB4, 0xB8, 0xD1, 0x00, 0x45, 0x0C, 0x6C, 0xA9, 0xC0, 0xD7, 0x00, 0x53, 0x0C, 0xBD, 0xAE, 0xC5, 0xD7, 0x00, 0x53}},	
	
	{.addr = 0xf9, .len = 21, .data = {0x0C, 0x85, 0xB4, 0xB8, 0xD1, 0x00, 0x45, 0x0C, 0x6C, 0xA9, 0xC0, 0xD7, 0x00, 0x53, 0x0C, 0xBD, 0xAE, 0xC5, 0xD7, 0x00, 0x53}},	
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0x85,	0xB4,	0xB8,	0xD1,	0x0,	0x45,	0x0C,	0x6C,	0xA9,	0xC0,	0xD7,	0x0,	0x53,	0x0C,	0xBD,	0xAE,	0xC5,	0xD7,	0x0,	0x53}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0x9B,	0xB3,	0xB9,	0xCE,	0x0,	0x53,	0x0C,	0x87,	0xB0,	0xBA,	0xD1,	0x0,	0x5F,	0x0C,	0xB6,	0xAE,	0xC0,	0xD2,	0x0,	0x66}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0x9E,	0xB3,	0xB8,	0xCD,	0x0,	0x5A,	0x0C,	0x8B,	0xB4,	0xB8,	0xD0,	0x0,	0x67,	0x0C,	0xB3,	0xB0,	0xBE,	0xD0,	0x0,	0x6E}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0x9F,	0xB4,	0xB6,	0xCD,	0x0,	0x5F,	0x0C,	0x8D,	0xB6,	0xB6,	0xCF,	0x0,	0x6D,	0x0C,	0xB1,	0xB4,	0xBB,	0xD0,	0x0,	0x74}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA0,	0xB6,	0xB5,	0xCC,	0x0,	0x65,	0x0C,	0x93,	0xB7,	0xB5,	0xCE,	0x0,	0x73,	0x0C,	0xB0,	0xB6,	0xB9,	0xCE,	0x0,	0x7B}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA1,	0xB7,	0xB2,	0xCB,	0x0,	0x6A,	0x0C,	0x94,	0xB8,	0xB3,	0xCE,	0x0,	0x79,	0x0C,	0xAF,	0xB8,	0xB6,	0xCD,	0x0,	0x82}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA2,	0xB7,	0xB1,	0xCB,	0x0,	0x6E,	0x0C,	0x96,	0xB8,	0xB2,	0xCD,	0x0,	0x7E,	0x0C,	0xAD,	0xBA,	0xB4,	0xCD,	0x0,	0x87}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA3,	0xB6,	0xB2,	0xC8,	0x0,	0x73,	0x0C,	0x9A,	0xB7,	0xB2,	0xCA,	0x0,	0x84,	0x0C,	0xAE,	0xBA,	0xB3,	0xCA,	0x0,	0x8D}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA3,	0xB5,	0xB2,	0xC7,	0x0,	0x76,	0x0C,	0x9B,	0xB7,	0xB1,	0xCA,	0x0,	0x86,	0x0C,	0xAE,	0xBA,	0xB3,	0xCA,	0x0,	0x90}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA3,	0xB6,	0xB1,	0xC6,	0x0,	0x7A,	0x0C,	0x9C,	0xB8,	0xAF,	0xCA,	0x0,	0x8A,	0x0C,	0xAD,	0xBA,	0xB2,	0xC9,	0x0,	0x95}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA4,	0xB5,	0xB0,	0xC4,	0x0,	0x7F,	0x0C,	0x9E,	0xB7,	0xAF,	0xC9,	0x0,	0x8F,	0x0C,	0xAE,	0xBA,	0xB1,	0xC7,	0x0,	0x9A}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA4,	0xB5,	0xB0,	0xC4,	0x0,	0x83,	0x0C,	0x9F,	0xB7,	0xAE,	0xC9,	0x0,	0x93,	0x0C,	0xAE,	0xBB,	0xB0,	0xC7,	0x0,	0x9F}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA5,	0xB3,	0xAF,	0xC4,	0x0,	0x86,	0x0C,	0xA0,	0xB6,	0xAD,	0xC9,	0x0,	0x97,	0x0C,	0xB0,	0xBA,	0xAE,	0xC6,	0x0,	0xA3}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA4,	0xB3,	0xB0,	0xC3,	0x0,	0x89,	0x0C,	0xA1,	0xB5,	0xAD,	0xC7,	0x0,	0x9A,	0x0C,	0xB0,	0xB9,	0xAF,	0xC5,	0x0,	0xA7}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA4,	0xB4,	0xAE,	0xC3,	0x0,	0x8D,	0x0C,	0xA2,	0xB6,	0xAC,	0xC7,	0x0,	0x9E,	0x0C,	0xB0,	0xB9,	0xAE,	0xC4,	0x0,	0xAC}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA5,	0xB4,	0xAD,	0xC3,	0x0,	0x8F,	0x0C,	0xA4,	0xB5,	0xAB,	0xC6,	0x0,	0xA1,	0x0C,	0xB1,	0xB9,	0xAC,	0xC4,	0x0,	0xAF}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA5,	0xB4,	0xAC,	0xC2,	0x0,	0x92,	0x0C,	0xA5,	0xB3,	0xAB,	0xC5,	0x0,	0xA5,	0x0C,	0xB1,	0xB9,	0xAC,	0xC2,	0x0,	0xB3}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA6,	0xB3,	0xAC,	0xC1,	0x0,	0x95,	0x0C,	0xA6,	0xB3,	0xAA,	0xC4,	0x0,	0xA7,	0x0C,	0xB3,	0xB9,	0xAA,	0xC2,	0x0,	0xB6}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA5,	0xB3,	0xAC,	0xC1,	0x0,	0x98,	0x0C,	0xA6,	0xB2,	0xAC,	0xC4,	0x0,	0xA9,	0x0C,	0xB2,	0xB8,	0xAA,	0xC2,	0x0,	0xBA}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA6,	0xB3,	0xAC,	0xC0,	0x0,	0x9A,	0x0C,	0xA6,	0xB2,	0xAA,	0xC4,	0x0,	0xAC,	0x0C,	0xB3,	0xB6,	0xAA,	0xC2,	0x0,	0xBD}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA6,	0xB3,	0xAA,	0xBF,	0x0,	0x9D,	0x0C,	0xA7,	0xB2,	0xA9,	0xC3,	0x0,	0xB0,	0x0C,	0xB4,	0xB7,	0xA9,	0xC0,	0x0,	0xC0}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA6,	0xB3,	0xAA,	0xBF,	0x0,	0xA0,	0x0C,	0xA8,	0xB1,	0xA9,	0xC2,	0x0,	0xB3,	0x0C,	0xB4,	0xB6,	0xA8,	0xBF,	0x0,	0xC4}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA5,	0xB2,	0xAA,	0xBF,	0x0,	0xA2,	0x0C,	0xA8,	0xB0,	0xA9,	0xC2,	0x0,	0xB5,	0x0C,	0xB3,	0xB5,	0xA8,	0xBF,	0x0,	0xC7}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA6,	0xB2,	0xA9,	0xBD,	0x0,	0xA5,	0x0C,	0xA8,	0xB1,	0xA7,	0xC1,	0x0,	0xB8,	0x0C,	0xB4,	0xB6,	0xA7,	0xBE,	0x0,	0xCA}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA7,	0xB0,	0xA9,	0xBE,	0x0,	0xA7,	0x0C,	0xAA,	0xAF,	0xA9,	0xC1,	0x0,	0xBB,	0x0C,	0xB5,	0xB4,	0xA7,	0xBE,	0x0,	0xCD}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA6,	0xB1,	0xA9,	0xBC,	0x0,	0xAA,	0x0C,	0xAA,	0xAF,	0xA7,	0xC0,	0x0,	0xBE,	0x0C,	0xB5,	0xB3,	0xA7,	0xBD,	0x0,	0xD0}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA5,	0xB0,	0xA9,	0xBC,	0x0,	0xAD,	0x0C,	0xA9,	0xAF,	0xA7,	0xBF,	0x0,	0xC1,	0x0C,	0xB4,	0xB3,	0xA7,	0xBD,	0x0,	0xD3}},
	{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA9,	0xAF,	0xA9,	0xBC,	0x0,	0xAF,	0x0C,	0xAB,	0xAF,	0xA7,	0xBE,	0x0,	0xC3,	0x0C,	0xB5,	0xB1,	0xA7,	0xBC,	0x0,	0xD6}}
};
#endif

#if 0
	static struct samsung_spi_data gamma_backlight[] = {
		{.addr = 0xf9, .len = 21, .data = {0x0C, 0x85, 0xB4, 0xB8, 0xD1, 0x00, 0x45, 0x0C, 0x6C, 0xA9, 0xC0, 0xD7, 0x00, 0x53, 0x0C, 0xBD, 0xAE, 0xC5, 0xD7, 0x00, 0x53}},	
		{.addr = 0xf9, .len = 21, .data = {0x0C, 0x85, 0xB4, 0xB8, 0xD1, 0x00, 0x45, 0x0C, 0x6C, 0xA9, 0xC0, 0xD7, 0x00, 0x53, 0x0C, 0xBD, 0xAE, 0xC5, 0xD7, 0x00, 0x53}}, 	
		{.addr = 0xf9, .len = 21, .data = {0x0C, 0x85, 0xB4, 0xB8, 0xD1, 0x00, 0x45, 0x0C, 0x6C, 0xA9, 0xC0, 0xD7, 0x00, 0x53, 0x0C, 0xBD, 0xAE, 0xC5, 0xD7, 0x00, 0x53}}, 	
		{.addr = 0xf9, .len = 21, .data = {0x0C, 0x85, 0xB4, 0xB8, 0xD1, 0x00, 0x45, 0x0C, 0x6C, 0xA9, 0xC0, 0xD7, 0x00, 0x53, 0x0C, 0xBD, 0xAE, 0xC5, 0xD7, 0x00, 0x53}},	

	
		{.addr = 0xf9, .len = 21, .data = {0x0C, 0x85, 0xB4, 0xB8, 0xD1, 0x00, 0x45, 0x0C, 0x6C, 0xA9, 0xC0, 0xD7, 0x00, 0x53, 0x0C, 0xBD, 0xAE, 0xC5, 0xD7, 0x00, 0x53}}, 	
		{.addr = 0xf9, .len = 21, .data = {0x0c,0x91,0xb4,0xb8,0xd1,0x00,0x48,	0x0c,0x7a,0xad,0xbd,0xd4,0x00,0x57,  0x0c,0xbb,0xae,0xc3,0xd5,0x00,0x56}},		//Lu=30
		{.addr = 0xf9, .len = 21, .data = {0x0c,0x91,0xb4,0xb8,0xd1,0x00,0x48,  0x0c,0x7a,0xad,0xbd,0xd4,0x00,0x57,  0x0c,0xbb,0xae,0xc3,0xd5,0x00,0x56}},		//Lu=30
		{.addr = 0xf9, .len = 21, .data = {0x0c,0x9d,0xb4,0xb9,0xcf,0x00,0x50,  0x0c,0x88,0xb1,0xba,0xd1,0x00,0x60,  0x0c,0xb9,0xae,0xc1,0xd3,0x00,0x60}},		//Lu=40
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa0,0xb4,0xb8,0xce,0x00,0x57,  0x0c,0x8c,0xb5,0xb8,0xd0,0x00,0x68,  0x0c,0xb6,0xb0,0xbf,0xd1,0x00,0x68}},		//Lu=50
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa0,0xb5,0xb7,0xce,0x00,0x5c,  0x0c,0x8e,0xb6,0xb6,0xcf,0x00,0x6e,  0x0c,0xb4,0xb4,0xbc,0xd1,0x00,0x6e}},		//Lu=60
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa2,0xb6,0xb6,0xcc,0x00,0x62,  0x0c,0x94,0xb7,0xb5,0xce,0x00,0x74,  0x0c,0xb3,0xb6,0xba,0xcf,0x00,0x75}},		//Lu=70
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa2,0xb7,0xb3,0xcc,0x00,0x67,  0x0c,0x95,0xb8,0xb3,0xce,0x00,0x7a,  0x0c,0xb1,0xb8,0xb7,0xce,0x00,0x7b}},		//Lu=80
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa3,0xb7,0xb2,0xcc,0x00,0x6b,  0x0c,0x97,0xb8,0xb2,0xcd,0x00,0x7f,  0x0c,0xaf,0xba,0xb5,0xce,0x00,0x80}},		//Lu=90
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa4,0xb6,0xb3,0xc9,0x00,0x70,  0x0c,0x9b,0xb7,0xb2,0xca,0x00,0x85,  0x0c,0xb0,0xba,0xb4,0xcb,0x00,0x86}},		//Lu=100
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa4,0xb5,0xb3,0xc8,0x00,0x73,  0x0c,0x9c,0xb7,0xb1,0xca,0x00,0x88,  0x0c,0xb0,0xba,0xb4,0xcb,0x00,0x89}},		//Lu=110
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa4,0xb6,0xb2,0xc7,0x00,0x77,  0x0c,0x9d,0xb8,0xaf,0xca,0x00,0x8c,  0x0c,0xaf,0xba,0xb3,0xca,0x00,0x8e}},		//Lu=120
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa5,0xb5,0xb1,0xc5,0x00,0x7c,  0x0c,0x9f,0xb7,0xaf,0xc9,0x00,0x91,  0x0c,0xb0,0xba,0xb2,0xc8,0x00,0x93}},		//Lu=130
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa5,0xb5,0xb1,0xc5,0x00,0x7f,  0x0c,0xa0,0xb7,0xae,0xc8,0x00,0x95,  0x0c,0xb0,0xbb,0xb1,0xc8,0x00,0x97}},		//Lu=140
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa6,0xb3,0xb0,0xc5,0x00,0x82,  0x0c,0xa1,0xb6,0xad,0xc8,0x00,0x99,  0x0c,0xb2,0xba,0xaf,0xc7,0x00,0x9b}},		//Lu=150
		{.addr = 0xf9, .len = 21, .data = {0x0c,0xa5,0xb3,0xb1,0xc4,0x00,0x85,  0x0c,0xa2,0xb5,0xad,0xc6,0x00,0x9d,  0x0c,0xb1,0xb9,0xb0,0xc6,0x00,0x9f}},	  //Lu=160
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA5,	0xB4,	0xAF,	0xC4,	0x0,	0x89,	0x0C,	0xA3,	0xB6,	0xAC,	0xC6,	0x0,	0xA1,	0x0C,	0xB1,	0xB9,	0xAF,	0xC5,	0x0,	0xA4}},
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA6,	0xB4,	0xAE,	0xC4,	0x0,	0x8B,	0x0C,	0xA5,	0xB5,	0xAB,	0xC5,	0x0,	0xA4,	0x0C,	0xB2,	0xB9,	0xAD,	0xC5,	0x0,	0xA7}},
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA6,	0xB4,	0xAD,	0xC3,	0x0,	0x8E,	0x0C,	0xA6,	0xB3,	0xAB,	0xC4,	0x0,	0xA8,	0x0C,	0xB2,	0xB9,	0xAD,	0xC3,	0x0,	0xAB}},
		{.addr = 0xf9, .len = 21, .data = {0x0C ,	0xA7,	0xB3,	0xAD,	0xC2,	0x0,	0x91,	0x0C,	0xA7,	0xB3,	0xAA,	0xC3,	0x0,	0xAB,	0x0C,	0xB4,	0xB9,	0xAB,	0xC3,	0x0,	0xAE}},
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA6,	0xB3,	0xAD,	0xC2,	0x0,	0x94,	0x0C,	0xA7,	0xB2,	0xAB,	0xC2,	0x0,	0xAD,	0x0C,	0xB3,	0xB8,	0xAB,	0xC3,	0x0,	0xB1}},
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA7,	0xB3,	0xAD,	0xC1,	0x0,	0x96,	0x0C,	0xA7,	0xB2,	0xAA,	0xC2,	0x0,	0xB0,	0x0C,	0xB4,	0xB6,	0xAB,	0xC3,	0x0,	0xB4}},
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA7,	0xB3,	0xAB,	0xC0,	0x0,	0x99,	0x0C,	0xA8,	0xB2,	0xA9,	0xC1,	0x0,	0xB4,	0x0C,	0xB5,	0xB7,	0xAA,	0xC1,	0x0,	0xB7}},
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA7,	0xB3,	0xAA,	0xC0,	0x0,	0x9C,	0x0C,	0xA9,	0xB1,	0xA9,	0xC0,	0x0,	0xB7,	0x0C,	0xB5,	0xB6,	0xA9,	0xC0,	0x0,	0xBB}},
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA6,	0xB2,	0xAB,	0xC0,	0x0,	0x9E,	0x0C,	0xA9,	0xB0,	0xA9,	0xC0,	0x0,	0xBA,	0x0C,	0xB4,	0xB6,	0xA9,	0xC0,	0x0,	0xBE}},
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA7,	0xB2,	0xAA,	0xBE,	0x0,	0xA1,	0x0C,	0xA9,	0xB1,	0xA7,	0xBF,	0x0,	0xBD,	0x0C,	0xB5,	0xB6,	0xA8,	0xBF,	0x0,	0xC1}},
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA8,	0xB0,	0xAA,	0xBF,	0x0,	0xA3,	0x0C,	0xAB,	0xAF,	0xA8,	0xBF,	0x0,	0xC0,	0x0C,	0xB6,	0xB4,	0xA8,	0xBF,	0x0,	0xC4}},
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA7,	0xB1,	0xAA,	0xBD,	0x0,	0xA6,	0x0C,	0xAB,	0xAF,	0xA7,	0xBE,	0x0,	0xC3,	0x0C,	0xB6,	0xB4,	0xA8,	0xBE,	0x0,	0xC7}},
		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA6,	0xB0,	0xAA,	0xBD,	0x0,	0xA9,	0x0C,	0xAA,	0xAF,	0xA7,	0xBD,	0x0,	0xC6,	0x0C,	0xB5,	0xB4,	0xA8,	0xBE,	0x0,	0xCA}},
//		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xA9,	0xAF,	0xA9,	0xBC,	0x0,	0xAA,	0x0C,	0xAB,	0xAE,	0xA6,	0xBB,	0x0,	0xC8,	0x0C,	0xB5,	0xB1,	0xA7,	0xBC,	0x0,	0xCC}},
//		{.addr = 0xf9, .len = 21, .data = {0x0C,    0xAA,   0xAE,   0xA8,   0xB9,   0x0,    0xB1,   0x0C,   0xAD,   0xAC,   0xA3,   0xB6,   0x0,    0xD6,   0x0C,   0xB6,   0xB5,   0xA8,   0xBF,   0x0,    0xC3 }},
//		{.addr = 0xf9, .len = 21, .data = {0x0C,    0xA9,   0xAF,   0xA9,   0xBC,   0x0,	0xB1,   0x0C,   0xB5,   0xB1,   0xA7,   0xBC,   0x0,    0xC3,   0x0C,   0xAB,   0xAE,   0xA6,   0xBB,   0x0,    0xD6}}, 
//		{.addr = 0xf9, .len = 21, .data = {0x0C, 	0xA9, 	0xAF, 	0xA9, 	0xBC, 	0x0, 	0xB1, 	0x0C, 	0xAB, 	0xAF, 	0xA7, 	0xBE, 	0x0, 	0xC3, 	0x0C, 	0xB5, 	0xB1, 	0xA7, 	0xBC, 	0x0, 	0xD6}}, 
		
//		{.addr = 0xf9, .len = 21, .data = {0x0C,	0xAB,	0xAD,	0xA8,	0xBB,	0x0,	0xAF,	0x0C,	0xAB,	0xAF,	0xA7,	0xBE,	0x0,	0xC3,	0x0C,	0xB5,	0xAC,	0xA6,	0xB9,	0x0,	0xD6}},  
		{.addr = 0xf9, .len = 21, .data = {0x0C, 	0xA9, 	0xAF, 	0xA9, 	0xBC, 	0x0, 	0xAF, 	0x0C, 	0xAB, 	0xAF, 	0xA7, 	0xBE, 	0x0, 	0xC3, 	0x0C, 	0xB5, 	0xB1, 	0xA7, 	0xBC, 	0x0, 	0xD6}}, 


};
#endif
/*added by huangtongfeng end*/
#else

static struct samsung_spi_data panel_sequence[] = {
	{ .addr = 0xf8, .len = 14, .data = { 0x01, 0x27, 0x27, 0x07, 0x07,
	 0x54, 0x9f, 0x63, 0x86, 0x1a, 0x33, 0x0d, 0x00, 0x00 } },
};
static struct samsung_spi_data display_sequence[] = {
	{ .addr = 0xf2, .len = 5, .data = { 0x02, 0x03, 0x1c, 0x10, 0x10 } },
	{ .addr = 0xf7, .len = 3, .data = { 0x00, 0x00, 0x30 } },
};

/* lum=300 cd/m2 */
static struct samsung_spi_data gamma_sequence_300[] = {
	{ .addr = 0xfa, .len = 22, .data = { 0x02, 0x18, 0x08, 0x24, 0x7d, 0x77,
	 0x5b, 0xbe, 0xc1, 0xb1, 0xb3, 0xb7, 0xa6, 0xc3, 0xc5, 0xb9, 0x00, 0xb3,
	 0x00, 0xaf, 0x00, 0xe8 } },
	{ .addr = 0xFA, .len = 1, .data = { 0x03 } },
};
/* lum = 180 cd/m2*/
static struct samsung_spi_data gamma_sequence_180[] = {
	{ .addr = 0xfa, .len = 22, .data = { 0x02, 0x18, 0x08, 0x24, 0x83, 0x78,
	 0x60, 0xc5, 0xc6, 0xb8, 0xba, 0xbe, 0xad, 0xcb, 0xcd, 0xc2, 0x00, 0x92,
	 0x00, 0x8e, 0x00, 0xbc } },
	{ .addr = 0xFA, .len = 1, .data = { 0x03 } },
};
/* lum = 80 cd/m2*/
static struct samsung_spi_data gamma_sequence_80[] = {
	{ .addr = 0xfa, .len = 22, .data = { 0x02, 0x18, 0x08, 0x24, 0x94, 0x73,
	 0x6c, 0xcb, 0xca, 0xbe, 0xc4, 0xc7, 0xb8, 0xd3, 0xd5, 0xcb, 0x00, 0x6d,
	 0x00, 0x69, 0x00, 0x8b } },
	{ .addr = 0xFA, .len = 1, .data = { 0x03 } },
};

static struct samsung_spi_data etc_sequence[] = {
	{ .addr = 0xF6, .len = 3, .data = { 0x00, 0x8e, 0x07 } },
	{ .addr = 0xB3, .len = 1, .data = { 0x0C } },
};


#endif

//static struct samsung_state_type samsung_state = { .brightness = 180 };
static struct msm_panel_common_pdata *lcdc_samsung_pdata;

#ifndef CONFIG_SPI_QUP
static void samsung_spi_write_byte(boolean dc, u8 data)
{
	uint32 bit;
	int bnum;

	gpio_set_value(spi_sclk, 0);
	gpio_set_value(spi_mosi, dc ? 1 : 0);
	ndelay(100);			/* at least 20 ns */
	gpio_set_value(spi_sclk, 1);	/* clk high */
	ndelay(100);			/* at least 20 ns */

	bnum = 8;			/* 8 data bits */
	bit = 0x80;
	while (bnum--) {
		gpio_set_value(spi_sclk, 0); /* clk low */
		gpio_set_value(spi_mosi, (data & bit) ? 1 : 0);
		ndelay(100);
		gpio_set_value(spi_sclk, 1); /* clk high */
		ndelay(100);
		bit >>= 1;
	}
	gpio_set_value(spi_mosi, 0);

}

static void samsung_spi_read_bytes(u8 cmd, u8 *data, int num)
{
	int bnum;

	/* Chip Select - low */
	gpio_set_value(spi_cs, 0);
	ndelay(100*2);

	/* command byte first */
	samsung_spi_write_byte(0, cmd);
	ndelay(100*2);

	gpio_direction_input(spi_mosi);
/*
	if (num > 1) {
		gpio_set_value(spi_sclk, 0);
		udelay(1);
		gpio_set_value(spi_sclk, 1);
		udelay(1);
	}
*/
	/* followed by data bytes */
	bnum = num * 8;	/* number of bits */

	*data = 0;
	
	while (bnum) {
		gpio_set_value(spi_sclk, 0); /* clk low */
		ndelay(100);
//		*data <<= 1;
//		*data |= gpio_get_value(spi_mosi) ? 1 : 0;
		gpio_set_value(spi_sclk, 1); /* clk high */
		ndelay(100);
		*data <<= 1;	//
		*data |= gpio_get_value(spi_mosi) ? 1 : 0;	//
		--bnum;
		if ((bnum % 8) == 0)
		{
			++data;
			if(bnum!=0)
				*data =0;
		}
	}

	gpio_direction_output(spi_mosi, 0);

	/* Chip Select - high */
	ndelay(100*2);
	gpio_set_value(spi_cs, 1);
}
#endif

#ifdef DEBUG
#if 0	
static const char *byte_to_binary(const u8 *buf, int len)
{
	static char b[32*8+1];
	char *p = b;
	int i, z;

	for (i = 0; i < len; ++i) {
		u8 val = *buf++;
		for (z = 1 << 7; z > 0; z >>= 1)
			*p++ = (val & z) ? '1' : '0';
	}
	*p = 0;

	return b;
}
#endif	
#endif

#define BIT_OFFSET	(bit_size % 8)
#define ADD_BIT(val) do { \
		tx_buf[bit_size / 8] |= \
			(u8)((val ? 1 : 0) << (7 - BIT_OFFSET)); \
		++bit_size; \
	} while (0)

#define ADD_BYTE(data) do { \
		tx_buf[bit_size / 8] |= (u8)(data >> BIT_OFFSET); \
		bit_size += 8; \
		if (BIT_OFFSET != 0) \
			tx_buf[bit_size / 8] |= (u8)(data << (8 - BIT_OFFSET));\
	} while (0)

static int samsung_serigo(struct samsung_spi_data data)
{
#ifdef CONFIG_SPI_QUP
	char                tx_buf[32];
	int                 bit_size = 0, i, rc;
	struct spi_message  m;
	struct spi_transfer t;

	if (!lcdc_spi_client) {
		pr_err("%s lcdc_spi_client is NULL\n", __func__);
		return -EINVAL;
	}

	memset(&t, 0, sizeof t);
	memset(tx_buf, 0, sizeof tx_buf);
	t.tx_buf = tx_buf;
	spi_setup(lcdc_spi_client);
	spi_message_init(&m);
	spi_message_add_tail(&t, &m);

	ADD_BIT(FALSE);
	ADD_BYTE(data.addr);
	for (i = 0; i < data.len; ++i) {
		ADD_BIT(TRUE);
		ADD_BYTE(data.data[i]);
	}

	/* add padding bits so we round to next byte */
	t.len = (bit_size+7) / 8;
	if (t.len <= 4)
		t.bits_per_word = bit_size;

	rc = spi_sync(lcdc_spi_client, &m);
#ifdef DEBUG
	pr_info("%s: addr=0x%02x, #args=%d[%d] [%s], rc=%d\n",
		__func__, data.addr, t.len, t.bits_per_word,
		byte_to_binary(tx_buf, t.len), rc);
#endif
	return rc;
#else
	int i;

	/* Chip Select - low */
	gpio_set_value(spi_cs, 0);
	ndelay(100);

	samsung_spi_write_byte(FALSE, data.addr);
	ndelay(100);

	for (i = 0; i < data.len; ++i) {
		samsung_spi_write_byte(TRUE, data.data[i]);
		ndelay(100);
	}

	/* Chip Select - high */
	gpio_set_value(spi_cs, 1);
#ifdef DEBUG
	pr_info("%s: cmd=0x%02x, #args=%d\n", __func__, data.addr, data.len);
#endif
	return 0;
#endif
}


static int samsung_write_cmd(u8 cmd)
{
#ifdef CONFIG_SPI_QUP
	char                tx_buf[2];
	int                 bit_size = 0, rc;
	struct spi_message  m;
	struct spi_transfer t;

	if (!lcdc_spi_client) {
		pr_err("%s lcdc_spi_client is NULL\n", __func__);
		return -EINVAL;
	}

	memset(&t, 0, sizeof t);
	memset(tx_buf, 0, sizeof tx_buf);
	t.tx_buf = tx_buf;
	spi_setup(lcdc_spi_client);
	spi_message_init(&m);
	spi_message_add_tail(&t, &m);

	ADD_BIT(FALSE);
	ADD_BYTE(cmd);

	t.len = 2;
	t.bits_per_word = 9;

	rc = spi_sync(lcdc_spi_client, &m);
#ifdef DEBUG
	pr_info("%s: addr=0x%02x, #args=%d[%d] [%s], rc=%d\n",
		__func__, cmd, t.len, t.bits_per_word,
		byte_to_binary(tx_buf, t.len), rc);
#endif
	return rc;
#else
	/* Chip Select - low */
	gpio_set_value(spi_cs, 0);
	ndelay(100);

	samsung_spi_write_byte(FALSE, cmd);

	/* Chip Select - high */
	ndelay(100);
	gpio_set_value(spi_cs, 1);
#ifdef DEBUG
	pr_info("%s: cmd=0x%02x\n", __func__, cmd);
#endif
	return 0;
#endif
}

static int samsung_serigo_list(struct samsung_spi_data *data, int count)
{
	int i, rc;
	for (i = 0; i < count; ++i, ++data) {
		rc = samsung_serigo(*data);
		if (rc)
			return rc;
//		msleep(1);		//wangcy
		mdelay(1);

	}
	return 0;
}

#ifndef CONFIG_SPI_QUP
static void samsung_spi_init(void)
{
	
	gpio_direction_output(spi_cs, 0);
	gpio_direction_output(spi_sclk, 0);
	gpio_direction_output(spi_mosi, 0);
	
	/* Set the output so that we don't disturb the slave device */
	gpio_set_value(spi_sclk, 1);
	gpio_set_value(spi_mosi, 0);

	/* Set the Chip Select deasserted (active low) */
	gpio_set_value(spi_cs, 1);
}
#endif

#ifdef CONFIG_OPPO_MODIFY
	/*added by huangtongfeng for new OLED display start*/

#define LCDC_RESET_N		73
static struct regulator *vreg_iovcc =0, *vreg_vci =0;

//for lbacklight
static unsigned int old_bl_level = 0;

#define LCD_BL_PWM 	(24-1)  //pm8058 gpio24
	
	struct pm8058_gpio_cfg {
			int 			gpio;
			struct pm_gpio cfg;
		};
	
	static void backlightctrl(int gpio, int value)
	{
#if 1
		int rc = 0 ;
	
		struct pm8058_gpio_cfg gpio_cfgs = 
		{
				gpio,
				{
					.direction	= PM_GPIO_DIR_OUT,
					.output_value	= 1,
					.output_buffer	= PM_GPIO_OUT_BUF_CMOS,
					.pull		= PM_GPIO_PULL_DN,
					.out_strength	= PM_GPIO_STRENGTH_HIGH,
					.function	= PM_GPIO_FUNC_NORMAL,
					.vin_sel	= 2,
					.inv_int_pol	= 0,
				}
		};
				
		gpio_cfgs.cfg.output_value = value; 
		rc = pm8xxx_gpio_config(gpio_cfgs.gpio,&gpio_cfgs.cfg);
					
		if(rc<0)
			printk(KERN_INFO"backlight enable pm805 failed-------\n");
#endif	
	}

	
#define BACKLIGHT_INIT_LEVEL	20
#define ARRAY_OF(x)       (sizeof(x)/sizeof(x[0]))

const int BACKLIGHT_MAX_LEVEL = (sizeof(gamma_backlight)/sizeof(*gamma_backlight) - 1);	


#ifdef ACL_SAVE
int acl_setup_flag = 0;
EXPORT_SYMBOL(acl_setup_flag);

 void setup_acl_save(int on_off)
{
	printk(KERN_INFO"%s: acl toggle on_off = %d\n" , __func__, on_off);
	if(on_off){
		samsung_serigo_list(acl_on_cmd,
			sizeof(acl_on_cmd)/sizeof(*acl_on_cmd));
		samsung_serigo_list(acl_param_set,
			sizeof(acl_param_set)/sizeof(*acl_param_set));
		acl_setup_flag = 1;
	}
	else{
		samsung_serigo_list(acl_off_cmd,
			sizeof(acl_off_cmd)/sizeof(*acl_off_cmd));
		acl_setup_flag = 0;
	}
}
EXPORT_SYMBOL(setup_acl_save);

#endif

#ifdef DYNAMIC_ELVSS  
static void setElvssLevel(unsigned int bl_level)
{     
 	if(bl_level >= (BACKLIGHT_MAX_LEVEL - 9) && bl_level <= BACKLIGHT_MAX_LEVEL)
		samsung_serigo_list(dynamic_elvss_defualt,
			sizeof(dynamic_elvss_defualt)/sizeof(*dynamic_elvss_defualt));
	else if(bl_level >= (BACKLIGHT_MAX_LEVEL - 13) && bl_level <= (BACKLIGHT_MAX_LEVEL - 10))				
		samsung_serigo_list(dynamic_elvss_37v,
			sizeof(dynamic_elvss_37v)/sizeof(*dynamic_elvss_37v));
	else if(bl_level >= (BACKLIGHT_MAX_LEVEL - 19) && bl_level <= (BACKLIGHT_MAX_LEVEL - 14))
		samsung_serigo_list(dynamic_elvss_34v,
			sizeof(dynamic_elvss_34v)/sizeof(*dynamic_elvss_34v));
	else
		samsung_serigo_list(dynamic_elvss_30v,
			sizeof(dynamic_elvss_30v)/sizeof(*dynamic_elvss_30v));

}
#endif
static void setGammaByBacklight(unsigned int bl_level)

{
	
/*	
	samsung_serigo_list(gamma_set_updata,
		sizeof(gamma_set_updata)/sizeof(*gamma_set_updata));
		
*/

		if(bl_level == 0)
		{
			if(have_timer_flag == 1)
			{
				remove_test_reg_timer();
				have_timer_flag = 0;
			}
			samsung_write_cmd(0x28);
		}
		else
		{
			samsung_serigo_list(&gamma_backlight[bl_level],
				sizeof(gamma_backlight[bl_level])/sizeof(*gamma_backlight));
	
			samsung_serigo_list(gamma_set_updata,
				sizeof(gamma_set_updata)/sizeof(*gamma_set_updata));

#ifdef DYNAMIC_ELVSS       
			setElvssLevel(bl_level);
#endif	
			samsung_write_cmd(0x29); //display on	
			if(have_timer_flag == 0)
			{
				setup_test_reg_timer();
				have_timer_flag = 1;
			}
		}

}

	static void samsung_panel_set_backlight(struct msm_fb_data_type *mfd)
	{
		unsigned int bl_level;
		
		bl_level = mfd->bl_level;	
		
//		printk(KERN_ERR"%s: BACKLIGHT_MAX_LEVEL = %d  bl_level = %d \n",
//			__func__, BACKLIGHT_MAX_LEVEL, bl_level);
		
		if(bl_level == old_bl_level || bl_level < 0 || bl_level > BACKLIGHT_MAX_LEVEL)	
		{///???
			return;
		}
		
		old_bl_level = bl_level;   
		setGammaByBacklight(bl_level);
	}
	/*added by huangtongfeng end*/
#endif  

   
static void samsung_disp_powerup(void)
{	

	int rc = 0;

	gpio_set_value(LCDC_RESET_N, 0);	//	samsung_write_cmd(0x00);	
	msleep(5);

	//enable		
	if (regulator_is_enabled(vreg_iovcc)==0){	
		rc = regulator_enable(vreg_iovcc);
			if (rc < 0) {
					printk(KERN_ERR"enable 8058_l2  error!\n");
					return;
			}
	}
//		yanghai add for avoid shining when wakeup 2012.8.30	start	
	msleep(1);
//		yanghai add for avoid shining when wakeup 2012.8.30	end
	//enable		
	if (regulator_is_enabled(vreg_vci)==0) {
	rc = regulator_enable(vreg_vci);
	if (rc < 0) {
		printk(KERN_ERR"enable 8058_l15  error!\n");
		return;
	}
		}
	msleep(15);
	gpio_set_value(LCDC_RESET_N, 1);	//	samsung_write_cmd(0x01);
//		yanghai modify for avoid shining when wakeup 2012.8.30	start  change" msleep(10)" to "msleep(100)"
	msleep(10);

//		yanghai modify for avoid shining when wakeup 2012.8.30	end
//		samsung_state.disp_powered_up = TRUE;
}


static void init_samsung_display(void)
{
	int i = 0;
	u8 base = 0xda;
	u8 data_a[2];
		
	
//	if (!samsung_state.disp_initialized) {
			
#ifndef CONFIG_SPI_QUP
		lcdc_samsung_pdata->panel_config_gpio(1);
//		samsung_spi_init();
#endif
//		if (samsung_state.disp_powered_up && !samsung_state.display_on) {
			//	LEVEL2 Command Enable
				
			samsung_serigo_list(level2_cmd_enable, 
				sizeof(level2_cmd_enable)/sizeof(*level2_cmd_enable));
				
			//	Panel Condition Set
				
			samsung_serigo_list(display_control_set, 
				sizeof(display_control_set)/sizeof(*display_control_set));
			samsung_serigo_list(gtcon_control_set, 
				sizeof(gtcon_control_set)/sizeof(*gtcon_control_set));
			samsung_serigo_list(ltps_timing_set, 
				sizeof(ltps_timing_set)/sizeof(*ltps_timing_set));
				
			//	Sleep out Command

			samsung_write_cmd(0x11);
//			mdelay(120);
				
			//	ID VALUE READ
					
#ifndef CONFIG_SPI_QUP
				
			for(i = 0, base=0xda; i < 3; base++,i++)
			{
				samsung_spi_read_bytes(base, data_a, 2);
#ifdef DEBUG
				printk(KERN_ERR"%s: data = 0x%x\n", __func__, data_a[1]);
#endif
			} 
					
#endif
				
				
				//	Smart Dynamic ELVSS Set
#ifdef DYNAMIC_ELVSS       
				
			samsung_serigo_list(dynamic_elvss_on, 
				sizeof(dynamic_elvss_on)/sizeof(*dynamic_elvss_on));
/*			samsung_serigo_list(dynamic_elvss_defualt, 
				sizeof(dynamic_elvss_defualt)/sizeof(*dynamic_elvss_defualt));
*/	
#endif
							
			//	Display Condition Set
					
			samsung_serigo_list(display_condition_set, 
				sizeof(display_condition_set)/sizeof(*display_condition_set));
				   
				
				//	Gamma Condition Set
/*				
					samsung_serigo_list(gamma_set_cmd, 
						sizeof(gamma_set_cmd)/sizeof(*gamma_set_cmd));
					samsung_serigo_list(gamma_set_updata, 
						sizeof(gamma_set_updata)/sizeof(*gamma_set_updata));
*/				
				//	Display On Command
				
				//	samsung_write_cmd(0x29);
//			gpio_tlmm_config(GPIO_CFG(3,  1, GPIO_CFG_OUTPUT,  GPIO_CFG_NO_PULL, GPIO_CFG_16MA), 0);
			setGammaByBacklight(old_bl_level == 0 ? BACKLIGHT_INIT_LEVEL:old_bl_level);
//			samsung_state.display_on = TRUE;
#ifdef  TEST_STATIC_ELECTRICITY			
			//  read 0x0a	
			{
				u8 data = 0;
				samsung_spi_read_bytes(0x0a, &data, 1);
#ifdef DEBUG
				printk(KERN_ERR"%s:reg_0x0a data = 0x%x\n", __func__, data);
#endif
			}	
#endif
			
//		}
	
//		samsung_state.disp_initialized = TRUE;
			
//	}
}

static void set_spi_gpio_direct(int direct)
{
	if(direct)		
	{
		gpio_direction_output(spi_cs, 0);
		gpio_direction_output(spi_sclk, 0);
		gpio_direction_output(spi_mosi, 0);
	}
	else
	{
		gpio_direction_input(spi_cs);
		gpio_direction_input(spi_sclk);
		gpio_direction_input(spi_mosi);
	}

}


static int lcdc_samsung_panel_on_test(void)
{

	gpio_set_value(LCDC_RESET_N, 0);

	mdelay(15);
	gpio_set_value(LCDC_RESET_N, 1);	//	samsung_write_cmd(0x01);
	mdelay(5);

	init_samsung_display();	
	
	backlightctrl(LCD_BL_PWM, 0);
						
	samsung_write_cmd(0x29); //display on	
	
	return 0;
}


static int lcdc_samsung_panel_on1(void)
{
	samsung_spi_init();
	set_spi_gpio_direct(1);

	samsung_disp_powerup();

	init_samsung_display();	
	
	backlightctrl(LCD_BL_PWM, 0);
	samsung_write_cmd(0x29); //display on	
 
	return 0;
}


static int lcdc_samsung_panel_on(struct platform_device *pdev)
{
	lcdc_samsung_panel_on1();

#ifdef	ACL_SAVE
	if(acl_setup_flag)
		setup_acl_save(1);
#endif

#ifdef TEST_STATIC_ELECTRICITY
	if(have_timer_flag == 0)
	{
		setup_test_reg_timer();
		have_timer_flag = 1;
	}
#endif
	return 0;
}


#ifdef CONFIG_OPPO_MODIFY
/*added by huangtongfeng for new OLED display start*/

#ifdef SAMSUNG_OLED_POWERDOWN
static void samsung_disp_powerdown(void)
{
	int rc = 0;
// yanghai del for never powerdown 3.0v 2012.9.16
	if(quick_poff_flag){
		if (!IS_ERR_OR_NULL(vreg_vci)) {
			if (regulator_is_enabled(vreg_vci)) {
				rc = regulator_disable(vreg_vci);
				if (rc) {
					printk(KERN_ERR"disable vreg_vci error!\n");
				}
			}
		}
	quick_poff_flag=0;	
	msleep(1);
	}
//yanghai del end
	if (!IS_ERR_OR_NULL(vreg_iovcc)) {
		if (regulator_is_enabled(vreg_iovcc)) {
			rc = regulator_disable(vreg_iovcc);
			if (rc) {
				printk(KERN_ERR"disable vreg_iovcc error!\n");
			}
		}
	}
}
#endif

/*added end*/
#endif

static int lcdc_samsung_panel_off_test(void)
{

//	if (samsung_state.disp_powered_up && samsung_state.display_on) {
				
		samsung_write_cmd(0x28);
		/* 0x10: Sleep In */
		
		samsung_write_cmd(0x10);

		gpio_set_value(LCDC_RESET_N, 0);	//	 set reset	low
		

//		samsung_state.display_on = FALSE;
//		samsung_state.disp_initialized = FALSE;
//	}
	return 0;
}

static int lcdc_samsung_panel_off1(void)
{
//	if (samsung_state.disp_powered_up && samsung_state.display_on) {
		
		
		samsung_write_cmd(0x28);
		/* 0x10: Sleep In */
		samsung_write_cmd(0x10);
		msleep(120);
		backlightctrl(LCD_BL_PWM, 1);
#if 0
#ifdef ACL_SAVE
		setup_acl_save(0);
#endif  
#endif
		gpio_set_value(LCDC_RESET_N, 0);	//	 set reset	low
#ifdef SAMSUNG_OLED_POWERDOWN
		samsung_disp_powerdown();
#endif
		set_spi_gpio_direct(0);				//   avoid  SPI  leakage

//		samsung_state.display_on = FALSE;
//		samsung_state.disp_initialized = FALSE;
//	}
	return 0;
}
static int lcdc_samsung_panel_off(struct platform_device *pdev)
{

#ifdef TEST_STATIC_ELECTRICITY
	if(have_timer_flag == 1)
	{
		remove_test_reg_timer();
		have_timer_flag = 0;
	}
#endif
	lcdc_samsung_panel_off1();

	return 0;
}

static void samsung_ldo_deinit(void)
{
	if (!IS_ERR_OR_NULL(vreg_vci)) {
		regulator_put(vreg_vci);
	}

	if (!IS_ERR_OR_NULL(vreg_iovcc)) {
		regulator_put(vreg_iovcc);
	}	
}


//yanghai add for lcd shut down  2012.8.30 start
static void samsung_shutdown(struct platform_device *pdev)
{
//yanghai add  set flag  for powrdown all power supply
	quick_poff_flag=1;
//yanghai add end
	lcdc_samsung_panel_off(pdev);
	samsung_ldo_deinit();
}
//yanghai add for lcd shut down  2012.8.30 end

#ifdef SYSFS_DEBUG_CMD
static ssize_t samsung_rda_cmd(struct device *dev,
	struct device_attribute *attr, char *buf)
{
	ssize_t ret = snprintf(buf, PAGE_SIZE, "%d\n", old_bl_level);
	
	pr_info("%s: %d\n", __func__, old_bl_level);
	
	return ret;
}

static ssize_t samsung_wta_cmd(struct device *dev,
	struct device_attribute *attr, const char *buf, size_t count)
{
	ssize_t ret = strnlen(buf, PAGE_SIZE);
	uint32 cmd;

	sscanf(buf, "%d", &cmd);
#ifdef DEBUG
	printk(KERN_ERR"samsung_wta_cmd cmd = 0x%x\n", cmd);
#endif
	switch(cmd){
		case 0 ... 33:
			setGammaByBacklight(cmd);
			break;
		default:
			break;
	}

//	samsung_write_cmd((u8)cmd);

	return ret;
}

static DEVICE_ATTR(cmd, S_IRUGO | S_IWUGO, samsung_rda_cmd, samsung_wta_cmd);
static struct attribute *fs_attrs[] = {
	&dev_attr_cmd.attr,
	NULL,
};
static struct attribute_group fs_attr_group = {
	.attrs = fs_attrs,
};

static ssize_t read_f9_reg_green(struct device *dev,
	struct device_attribute *attr, char *buf)
{
/*
	ssize_t ret = snprintf(buf, PAGE_SIZE, "%2.2x %2.2x %2.2x %2.2x %2.2x %2.2x %2.2x \n", 
					gamma_backlight[old_bl_level].data[0], gamma_backlight[old_bl_level].data[1], gamma_backlight[old_bl_level].data[2], gamma_backlight[old_bl_level].data[3], gamma_backlight[old_bl_level].data[4],
					gamma_backlight[old_bl_level].data[5], gamma_backlight[old_bl_level].data[6], gamma_backlight[old_bl_level].data[7]);
*/	
//	pr_info("%s: 0x%2.2x\n", __func__, buf);
	
	return 0;
}

static ssize_t write_f9_reg_green(struct device *dev,
	struct device_attribute *attr, const char *buf, size_t count)
{
	ssize_t ret = strnlen(buf, PAGE_SIZE);
	int i = 0;

	#if 0
	uint32 cmd[7];
	struct samsung_spi_data cmd_gamma = 
	{
		.addr = 0xf9,
		.len = 21,
		.data = {0}
	};
	u8 addr = 0xf9;
	cmd = kmalloc(30, GFP_ATOMIC);
	if(!cmd)
	{
		printk(KERN_ERR"%s kmalloc cmd error", __func__);		
		return -1;
	}
	
	memset(cmd, 0, 30);
	#endif
	
	sscanf(buf, "0x%x, 0x%x, 0x%x, 0x%x, 0x%x, 0x%x, 0x%x", &gamma_backlight[old_bl_level].data[7], &gamma_backlight[old_bl_level].data[8], 
			&gamma_backlight[old_bl_level].data[9], &gamma_backlight[old_bl_level].data[10], &gamma_backlight[old_bl_level].data[11],
			&gamma_backlight[old_bl_level].data[12], &gamma_backlight[old_bl_level].data[13]);


	for(i = 7; i < 14; i++)
		printk(KERN_ERR"%s gamma_backlight[%d].data[%d] = 0x%x\n", __func__, old_bl_level, i, gamma_backlight[old_bl_level].data[i]);
	
	setGammaByBacklight(old_bl_level);
	
#if 0
		samsung_serigo_list(&gamma_backlight[old_bl_level],
			sizeof(gamma_backlight[old_bl_level])/sizeof(*gamma_backlight));
		samsung_serigo_list(gamma_set_updata,
			sizeof(gamma_set_updata)/sizeof(*gamma_set_updata));
#endif
	return ret;
}

static DEVICE_ATTR(f9_reg_green, S_IRUGO | S_IWUGO, read_f9_reg_green, write_f9_reg_green);
static struct attribute *green_attrs[] = {
	&dev_attr_f9_reg_green.attr,
	NULL,
};
static struct attribute_group green_attr_group = {
	.attrs = green_attrs,
};
static ssize_t read_f9_reg_blue(struct device *dev,
	struct device_attribute *attr, char *buf)
{
/*
	ssize_t ret = snprintf(buf, PAGE_SIZE, "%2.2x %2.2x %2.2x %2.2x %2.2x %2.2x %2.2x \n", 
					gamma_backlight[old_bl_level].data[0], gamma_backlight[old_bl_level].data[1], gamma_backlight[old_bl_level].data[2], gamma_backlight[old_bl_level].data[3], gamma_backlight[old_bl_level].data[4],
					gamma_backlight[old_bl_level].data[5], gamma_backlight[old_bl_level].data[6], gamma_backlight[old_bl_level].data[7]);
*/	
//	pr_info("%s: 0x%2.2x\n", __func__, buf);
	
	return 0;
}

static ssize_t write_f9_reg_blue(struct device *dev,
	struct device_attribute *attr, const char *buf, size_t count)
{
	ssize_t ret = strnlen(buf, PAGE_SIZE);
	int i = 0;
	
	sscanf(buf, "0x%x, 0x%x, 0x%x, 0x%x, 0x%x, 0x%x, 0x%x", &gamma_backlight[old_bl_level].data[14], &gamma_backlight[old_bl_level].data[15], 
			&gamma_backlight[old_bl_level].data[16], &gamma_backlight[old_bl_level].data[17], &gamma_backlight[old_bl_level].data[18],
			&gamma_backlight[old_bl_level].data[19], &gamma_backlight[old_bl_level].data[20]);


	for(i = 14; i < 21; i++)
		printk(KERN_ERR"%s gamma_backlight[old_bl_level].data[%d] = 0x%x\n", __func__, i, gamma_backlight[old_bl_level].data[i]);

	setGammaByBacklight(old_bl_level);
	
#if 0
		samsung_serigo_list(&gamma_backlight[old_bl_level],
			sizeof(gamma_backlight[old_bl_level])/sizeof(*gamma_backlight));
		samsung_serigo_list(gamma_set_updata,
			sizeof(gamma_set_updata)/sizeof(*gamma_set_updata));
#endif
	return ret;
}

static DEVICE_ATTR(f9_reg_blue, S_IRUGO | S_IWUGO, read_f9_reg_blue, write_f9_reg_blue);
static struct attribute *blue_attrs[] = {
	&dev_attr_f9_reg_blue.attr,
	NULL,
};
static struct attribute_group blue_attr_group = {
	.attrs = blue_attrs,
};


static ssize_t read_f9_reg_red(struct device *dev,
	struct device_attribute *attr, char *buf)
{
/*
	ssize_t ret = snprintf(buf, PAGE_SIZE, "%2.2x %2.2x %2.2x %2.2x %2.2x %2.2x %2.2x \n", 
					gamma_backlight[old_bl_level].data[0], gamma_backlight[old_bl_level].data[1], gamma_backlight[old_bl_level].data[2], gamma_backlight[old_bl_level].data[3], gamma_backlight[old_bl_level].data[4],
					gamma_backlight[old_bl_level].data[5], gamma_backlight[old_bl_level].data[6], gamma_backlight[old_bl_level].data[7]);
*/	
//	pr_info("%s: 0x%2.2x\n", __func__, buf);
	
	return 0;
}

static ssize_t write_f9_reg_red(struct device *dev,
	struct device_attribute *attr, const char *buf, size_t count)
{
	ssize_t ret = strnlen(buf, PAGE_SIZE);
	int i = 0;

	#if 0
	uint32 cmd[7];
	struct samsung_spi_data cmd_gamma = 
	{
		.addr = 0xf9,
		.len = 21,
		.data = {0}
	};
	u8 addr = 0xf9;
	cmd = kmalloc(30, GFP_ATOMIC);
	if(!cmd)
	{
		printk(KERN_ERR"%s kmalloc cmd error", __func__);		
		return -1;
	}
	
	memset(cmd, 0, 30);
	#endif
	
	sscanf(buf, "0x%x, 0x%x, 0x%x, 0x%x, 0x%x, 0x%x, 0x%x", &gamma_backlight[old_bl_level].data[0], &gamma_backlight[old_bl_level].data[1], 
			&gamma_backlight[old_bl_level].data[2], &gamma_backlight[old_bl_level].data[3], &gamma_backlight[old_bl_level].data[4],
			&gamma_backlight[old_bl_level].data[5], &gamma_backlight[old_bl_level].data[6]);

	for(i = 0; i < 7; i++)
		printk(KERN_ERR"%s gamma_backlight[old_bl_level].data[%d] = 0x%x\n", __func__, i, gamma_backlight[old_bl_level].data[i]);

	setGammaByBacklight(old_bl_level);

#if 0
	samsung_serigo_list(&gamma_backlight[old_bl_level],
		sizeof(gamma_backlight[old_bl_level])/sizeof(*gamma_backlight));
	samsung_serigo_list(gamma_set_updata,
		sizeof(gamma_set_updata)/sizeof(*gamma_set_updata));
#endif

	return ret;
}

static DEVICE_ATTR(f9_reg_red, S_IRUGO | S_IWUGO, read_f9_reg_red, write_f9_reg_red);
static struct attribute *red_attrs[] = {
	&dev_attr_f9_reg_red.attr,
	NULL,
};
static struct attribute_group red_attr_group = {
	.attrs = red_attrs,
};

static ssize_t read_f9_reg(struct device *dev,
	struct device_attribute *attr, char *buf)
{
/*
	ssize_t ret = snprintf(buf, PAGE_SIZE, "%2.2x %2.2x %2.2x %2.2x %2.2x %2.2x %2.2x \n", 
					gamma_backlight[old_bl_level].data[0], gamma_backlight[old_bl_level].data[1], gamma_backlight[old_bl_level].data[2], gamma_backlight[old_bl_level].data[3], gamma_backlight[old_bl_level].data[4],
					gamma_backlight[old_bl_level].data[5], gamma_backlight[old_bl_level].data[6], gamma_backlight[old_bl_level].data[7]);
*/	
//	pr_info("%s: 0x%2.2x\n", __func__, buf);
	
	return 0;
}

static ssize_t write_f9_reg(struct device *dev,
	struct device_attribute *attr, const char *buf, size_t count)
{
	ssize_t ret = strnlen(buf, PAGE_SIZE);
	int i = 0;

	
	sscanf(buf, "0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x,	0x%x", 
			&gamma_backlight[old_bl_level].data[0], &gamma_backlight[old_bl_level].data[1], &gamma_backlight[old_bl_level].data[2], 
			&gamma_backlight[old_bl_level].data[3], &gamma_backlight[old_bl_level].data[4],	&gamma_backlight[old_bl_level].data[5], 
			&gamma_backlight[old_bl_level].data[6], &gamma_backlight[old_bl_level].data[7],	&gamma_backlight[old_bl_level].data[8], 
			&gamma_backlight[old_bl_level].data[9], &gamma_backlight[old_bl_level].data[10],&gamma_backlight[old_bl_level].data[11], 
			&gamma_backlight[old_bl_level].data[12], &gamma_backlight[old_bl_level].data[13],&gamma_backlight[old_bl_level].data[14], 
			&gamma_backlight[old_bl_level].data[15], &gamma_backlight[old_bl_level].data[16],&gamma_backlight[old_bl_level].data[17], 
			&gamma_backlight[old_bl_level].data[18], &gamma_backlight[old_bl_level].data[19],&gamma_backlight[old_bl_level].data[20]);

	for(i = 0; i < 21; i++)
		printk(KERN_ERR"%s gamma_backlight[old_bl_level].data[%d] = 0x%x\n", __func__, i, gamma_backlight[old_bl_level].data[i]);

	setGammaByBacklight(old_bl_level);

	return ret;
}

static DEVICE_ATTR(f9_reg, S_IRUGO | S_IWUGO, read_f9_reg, write_f9_reg);
static struct attribute *f9_reg_attrs[] = {
	&dev_attr_f9_reg.attr,
	NULL,
};
static struct attribute_group f9_reg_attr_group = {
	.attrs = f9_reg_attrs,
};

#endif
//yanghai add lcd truly power off interface


static ssize_t read_lcd_power(struct device *dev,
	struct device_attribute *attr, char *buf)
{
	
	return 0;
}


static ssize_t write_lcd_power(struct device *dev,
	struct device_attribute *attr, const char *buf, size_t count)
{
	ssize_t ret = strnlen(buf, PAGE_SIZE);	

// yanghai del for never powerdown 3.0v 2012.9.16
	printk(KERN_ERR"lcd truly powerdown!\n");
	quick_poff_flag=1;
	return ret;
}

static DEVICE_ATTR(lcd_power, S_IRUGO | S_IWUGO, read_lcd_power, write_lcd_power);

static struct attribute *lcd_power_attrs[] = {
	&dev_attr_lcd_power.attr,
	NULL,
};
static struct attribute_group lcd_power_attr_group = {
	.attrs = lcd_power_attrs,
};


//yanghai add poweroff interface end
static struct msm_fb_panel_data samsung_panel_data = {
	.on = lcdc_samsung_panel_on,
	.off = lcdc_samsung_panel_off,
    .set_backlight = samsung_panel_set_backlight,
};
void StaticElectricityTest(void)
{
	lcdc_samsung_panel_off_test();
	lcdc_samsung_panel_on_test();
}
EXPORT_SYMBOL(StaticElectricityTest);

#ifdef  TEST_STATIC_ELECTRICITY			

//#define MSM8260_GPIO_97	 	97
//#define MSM8260_GPIO_100	100

struct timer_list test_reg_timer;
static int test_reg_count = 0;


static void setup_test_reg_timer(void);

static void test_reg_func(unsigned long arg)
{
	u8 data = 0;
	samsung_spi_read_bytes(0x0a, &data, 1);
	if(data != 0x9d)
	{
		test_reg_count += 1; 
		printk(KERN_ERR"******LCD register error, reset LCD test_reg_count = %d\n", test_reg_count);
		StaticElectricityTest();
		
	}

	init_timer(&test_reg_timer);
	test_reg_timer.function = test_reg_func;
	test_reg_timer.expires = jiffies + (5*HZ);
	test_reg_timer.data = 0;
	add_timer(&test_reg_timer);

}

static void setup_test_reg_timer(void)
{
	init_timer(&test_reg_timer);
	test_reg_timer.function = test_reg_func;
	test_reg_timer.expires = jiffies + (5*HZ);
	test_reg_timer.data = 0;
	add_timer(&test_reg_timer);
}
static void remove_test_reg_timer(void)
{
	del_timer(&test_reg_timer);
}
#endif

static int samsung_ldo_init(void)
{	

	int rc = 0;

	vreg_iovcc = regulator_get(NULL,"8058_l2");
	if (IS_ERR_OR_NULL(vreg_iovcc)) {
		pr_err("%s: Unable to get 8058_l2\n", __func__);
		return -ENODEV;
	}
	rc = regulator_set_voltage(vreg_iovcc,1800000,1800000); 		
	if (rc) {
		printk(KERN_ERR"set 8058_l2  voltage error!\n");
		return -ENODEV;
	}

	vreg_vci = regulator_get(NULL,"8058_l15");
	if (IS_ERR_OR_NULL(vreg_vci)) {
		pr_err("%s: Unable to get 8058_l15\n", __func__);
		goto err_free_vreg_iovcc;
	}
	rc = regulator_set_voltage(vreg_vci,3000000,3000000);		
	if (rc) {
		printk(KERN_ERR"set 8058_l15  voltage error!\n");
		goto err_free_vreg_iovcc;
	}

	return 0;
err_free_vreg_iovcc:
	regulator_put(vreg_iovcc);
	return -ENODEV;
}

static int __devinit samsung_probe(struct platform_device *pdev)
{
	struct msm_panel_info *pinfo;
#ifdef SYSFS_DEBUG_CMD    
	struct platform_device *fb_dev;
	struct msm_fb_data_type *mfd;
	int rc;
#endif

	lcdc_samsung_pdata = pdev->dev.platform_data;
//yanghai add

	spi_sclk = *(lcdc_samsung_pdata->gpio_num);
	spi_cs   = *(lcdc_samsung_pdata->gpio_num + 1);
	spi_mosi = *(lcdc_samsung_pdata->gpio_num + 2);
	
	rc = gpio_request(spi_sclk,"lcd_spi_clk");
	if (rc) {
		pr_err("Unable to request GPIO [%d]\n",spi_sclk);
		}
	
	rc = gpio_request(spi_cs,"lcd_spi_cs");
	if (rc) {
		pr_err("Unable to request GPIO [%d]\n",spi_cs);
		}	

	rc = gpio_request(spi_mosi,"lcd_spi_mosi");
	if (rc) {
		pr_err("Unable to request GPIO [%d]\n",spi_mosi);
		}	
//yanghai add end
	rc = samsung_ldo_init();
	if(rc) {
		pr_err("%s ldo init failed\n", __func__);
		return rc;
	}
	pinfo = &samsung_panel_data.panel_info;
	pinfo->xres = 480;  
	pinfo->yres = 800;
	pinfo->type = LCDC_PANEL;
	pinfo->pdest = DISPLAY_1;
	pinfo->wait_cycle = 0;
	pinfo->bpp = 24;
	pinfo->fb_num = 2;
	pinfo->clk_rate = 25600000;//23800000; // Max 27.77MHz 	
	pinfo->bl_max = BACKLIGHT_MAX_LEVEL;
	pinfo->bl_min = 1;

#ifdef CONFIG_OPPO_MODIFY
    /*refer to LD9040 application note*/
    pinfo->lcdc.h_back_porch = 16-2;	/* HBP-HLW */
    pinfo->lcdc.h_front_porch = 16;
    pinfo->lcdc.h_pulse_width = 2;
    /*refer to LD040 application note*/
    pinfo->lcdc.v_back_porch = 3-2;		/* VBP-VLW */
    pinfo->lcdc.v_front_porch = 28;
    pinfo->lcdc.v_pulse_width = 2;
#else
	/* AMS367PE02 Operation Manual, Page 7 */
	pinfo->lcdc.h_back_porch = 16;//16-2;	/* HBP-HLW */  
	pinfo->lcdc.h_front_porch = 16;
	pinfo->lcdc.h_pulse_width = 2;
	/* AMS367PE02 Operation Manual, Page 6 */
	pinfo->lcdc.v_back_porch = 6;//3-2;		/* VBP-VLW */ 
	pinfo->lcdc.v_front_porch = 10;//28;					
	pinfo->lcdc.v_pulse_width = 2;
#endif

	pinfo->lcdc.border_clr = 0;
	pinfo->lcdc.underflow_clr = 0xff;
	pinfo->lcdc.hsync_skew = 0;
	pdev->dev.platform_data = &samsung_panel_data;

#ifdef SYSFS_DEBUG_CMD
	fb_dev = msm_fb_add_device(pdev);
	mfd = platform_get_drvdata(fb_dev);
	//lcdc_samsung_panel_on(pdev);
	rc = sysfs_create_group(&mfd->fbi->dev->kobj, &fs_attr_group);
	if (rc) {
		pr_err("%s: fs_attr_group sysfs group creation failed, rc=%d\n", __func__, rc);
		return rc;
	}
	
	rc = sysfs_create_group(&mfd->fbi->dev->kobj, &red_attr_group);
	if (rc) {
		pr_err("%s:red_attr_group sysfs group creation failed, rc=%d\n", __func__, rc);
		return rc;
	}
	
	rc = sysfs_create_group(&mfd->fbi->dev->kobj, &blue_attr_group);
	if (rc) {
		pr_err("%s:blue_attr_group sysfs group creation failed, rc=%d\n", __func__, rc);
		return rc;
	}
	
	rc = sysfs_create_group(&mfd->fbi->dev->kobj, &green_attr_group);
	if (rc) {
		pr_err("%s:green_attr_group sysfs group creation failed, rc=%d\n", __func__, rc);
		return rc;
	}
	
	rc = sysfs_create_group(&mfd->fbi->dev->kobj, &f9_reg_attr_group);
	if (rc) {
		pr_err("%s:f9_reg_attr_group sysfs group creation failed, rc=%d\n", __func__, rc);
		return rc;
	}
//yanghai add	
	rc = sysfs_create_group(&mfd->fbi->dev->kobj, &lcd_power_attr_group);
	if (rc) {
		pr_err("%s:lcd_power_attr_group sysfs group creation failed, rc=%d\n", __func__, rc);
		return rc;
	}
//yanghai add end
#else
	msm_fb_add_device(pdev);
#endif
	return 0;
}

#ifdef CONFIG_SPI_QUP
static int __devinit lcdc_samsung_spi_probe(struct spi_device *spi)
{
	lcdc_spi_client = spi;
	lcdc_spi_client->bits_per_word = 32;
	return 0;
}
static int __devexit lcdc_samsung_spi_remove(struct spi_device *spi)
{
	lcdc_spi_client = NULL;
	return 0;
}
static struct spi_driver lcdc_samsung_spi_driver = {
	.driver.name   = LCDC_SAMSUNG_SPI_DEVICE_NAME,
	.driver.owner  = THIS_MODULE,
	.probe         = lcdc_samsung_spi_probe,
	.remove        = __devexit_p(lcdc_samsung_spi_remove),
};
#endif

static struct platform_driver this_driver = {
	.probe		= samsung_probe,
	.shutdown      =samsung_shutdown,	    //yanghai  add  for lcd shutdown 2012.8.30
	.driver.name	= "lcdc_samsung_oled",
};

static int __init lcdc_samsung_panel_init(void)
{
	int ret;

#ifdef CONFIG_FB_MSM_LCDC_AUTO_DETECT
	if (msm_fb_detect_client("lcdc_samsung_oled")) {
		pr_err("%s: detect failed\n", __func__);
		return 0;
	}
#endif


	ret = platform_driver_register(&this_driver);
	if (ret) {
		pr_err("%s: driver register failed, rc=%d\n", __func__, ret);
		return ret;
	}

#ifdef CONFIG_SPI_QUP
	ret = spi_register_driver(&lcdc_samsung_spi_driver);

	if (ret) {
		pr_err("%s: spi register failed: rc=%d\n", __func__, ret);
		platform_driver_unregister(&this_driver);
	} else
		pr_info("%s: SUCCESS (SPI)\n", __func__);
#else
	pr_info("%s: SUCCESS (BitBang)\n", __func__);
#endif
	return ret;
}

module_init(lcdc_samsung_panel_init);
static void __exit lcdc_samsung_panel_exit(void)
{
	pr_info("%s\n", __func__);
#ifdef CONFIG_SPI_QUP
	spi_unregister_driver(&lcdc_samsung_spi_driver);
#endif
	platform_driver_unregister(&this_driver);
}
module_exit(lcdc_samsung_panel_exit);
